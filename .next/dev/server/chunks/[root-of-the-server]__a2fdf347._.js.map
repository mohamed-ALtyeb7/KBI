{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/7mood/Desktop/test%207.5/main/firebase/firebaseConfig.ts"],"sourcesContent":["import { initializeApp, getApps, getApp } from \"firebase/app\";\nimport { getFirestore, disableNetwork } from \"firebase/firestore\";\nimport { getAuth } from \"firebase/auth\";\nimport { getStorage } from \"firebase/storage\";\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY || \"YOUR_API_KEY\",\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN || \"YOUR_AUTH_DOMAIN\",\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID || \"YOUR_PROJECT_ID\",\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET || \"YOUR_STORAGE_BUCKET\",\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID || \"YOUR_MESSAGING_SENDER_ID\",\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID || \"YOUR_APP_ID\",\n};\n\n// Check if we are using placeholder values (Mock Mode)\nexport const isMockMode = firebaseConfig.apiKey === \"YOUR_API_KEY\";\n\n// Initialize Firebase\nconst app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\n\nexport const db = getFirestore(app);\nexport const auth = getAuth(app);\nexport const storage = getStorage(app);\n\nif (typeof window !== \"undefined\" && isMockMode) {\n  try {\n    void disableNetwork(db);\n  } catch { void 0 }\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;AAEA,MAAM,iBAAiB;IACrB,QAAQ,+EAA4C;IACpD,YAAY,kEAAgD;IAC5D,WAAW,kDAA+C;IAC1D,eAAe,sEAAmD;IAClE,mBAAmB,oDAAwD;IAC3E,OAAO,iFAA2C;AACpD;AAGO,MAAM,aAAa,eAAe,MAAM,KAAK;AAEpD,sBAAsB;AACtB,MAAM,MAAM,CAAC,IAAA,6KAAO,IAAG,MAAM,GAAG,IAAA,mLAAa,EAAC,kBAAkB,IAAA,4KAAM;AAE/D,MAAM,KAAK,IAAA,mLAAY,EAAC;AACxB,MAAM,OAAO,IAAA,+KAAO,EAAC;AACrB,MAAM,UAAU,IAAA,oMAAU,EAAC;AAElC"}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/7mood/Desktop/test%207.5/main/app/api/technicians/create/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\"\r\nimport { createUserWithEmailAndPassword } from \"firebase/auth\"\r\nimport { doc, setDoc, collection, addDoc } from \"firebase/firestore\"\r\nimport { auth, db } from \"@/firebase/firebaseConfig\"\r\n\r\nexport async function POST(request: NextRequest) {\r\n    try {\r\n        const body = await request.json()\r\n        const { name, email, password, phone, phone2, specialization, permissions, avatar, status } = body\r\n\r\n        if (!name || !email || !password) {\r\n            return NextResponse.json(\r\n                { error: \"Name, email, and password are required\" },\r\n                { status: 400 }\r\n            )\r\n        }\r\n\r\n        // Create Firebase Auth account\r\n        const userCredential = await createUserWithEmailAndPassword(auth, email, password)\r\n        const uid = userCredential.user.uid\r\n\r\n        // Create technician document in Firestore\r\n        const technicianData = {\r\n            uid,\r\n            name,\r\n            email,\r\n            phone: phone || \"\",\r\n            phone2: phone2 || \"\",\r\n            role: \"technician\",\r\n            specialization: specialization || [],\r\n            permissions: permissions || {\r\n                viewOrders: true,\r\n                editOrders: true,\r\n                updateStatus: true,\r\n                uploadAttachments: true,\r\n                chat: true,\r\n                viewCorporateRequests: false\r\n            },\r\n            avatar: avatar || \"\",\r\n            status: status || \"Active\",\r\n            createdAt: new Date()\r\n        }\r\n\r\n        // Add to technicians collection\r\n        const techRef = await addDoc(collection(db, \"technicians\"), technicianData)\r\n\r\n        // Also add to users collection for role-based access\r\n        await setDoc(doc(db, \"users\", uid), {\r\n            email,\r\n            role: \"technician\",\r\n            technicianId: techRef.id,\r\n            createdAt: new Date()\r\n        })\r\n\r\n        return NextResponse.json({\r\n            success: true,\r\n            message: \"Technician created successfully\",\r\n            technicianId: techRef.id,\r\n            uid\r\n        })\r\n\r\n    } catch (error: any) {\r\n        console.error(\"Error creating technician:\", error)\r\n\r\n        // Handle specific Firebase Auth errors\r\n        if (error.code === \"auth/email-already-in-use\") {\r\n            return NextResponse.json(\r\n                { error: \"Email is already registered\" },\r\n                { status: 400 }\r\n            )\r\n        }\r\n        if (error.code === \"auth/weak-password\") {\r\n            return NextResponse.json(\r\n                { error: \"Password should be at least 6 characters\" },\r\n                { status: 400 }\r\n            )\r\n        }\r\n        if (error.code === \"auth/invalid-email\") {\r\n            return NextResponse.json(\r\n                { error: \"Invalid email address\" },\r\n                { status: 400 }\r\n            )\r\n        }\r\n\r\n        return NextResponse.json(\r\n            { error: error.message || \"Failed to create technician\" },\r\n            { status: 500 }\r\n        )\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AACA;AAAA;AACA;;;;;AAEO,eAAe,KAAK,OAAoB;IAC3C,IAAI;QACA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE,MAAM,EAAE,cAAc,EAAE,WAAW,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG;QAE9F,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,UAAU;YAC9B,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,OAAO;YAAyC,GAClD;gBAAE,QAAQ;YAAI;QAEtB;QAEA,+BAA+B;QAC/B,MAAM,iBAAiB,MAAM,IAAA,sMAA8B,EAAC,oIAAI,EAAE,OAAO;QACzE,MAAM,MAAM,eAAe,IAAI,CAAC,GAAG;QAEnC,0CAA0C;QAC1C,MAAM,iBAAiB;YACnB;YACA;YACA;YACA,OAAO,SAAS;YAChB,QAAQ,UAAU;YAClB,MAAM;YACN,gBAAgB,kBAAkB,EAAE;YACpC,aAAa,eAAe;gBACxB,YAAY;gBACZ,YAAY;gBACZ,cAAc;gBACd,mBAAmB;gBACnB,MAAM;gBACN,uBAAuB;YAC3B;YACA,QAAQ,UAAU;YAClB,QAAQ,UAAU;YAClB,WAAW,IAAI;QACnB;QAEA,gCAAgC;QAChC,MAAM,UAAU,MAAM,IAAA,6KAAM,EAAC,IAAA,iLAAU,EAAC,kIAAE,EAAE,gBAAgB;QAE5D,qDAAqD;QACrD,MAAM,IAAA,6KAAM,EAAC,IAAA,0KAAG,EAAC,kIAAE,EAAE,SAAS,MAAM;YAChC;YACA,MAAM;YACN,cAAc,QAAQ,EAAE;YACxB,WAAW,IAAI;QACnB;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACrB,SAAS;YACT,SAAS;YACT,cAAc,QAAQ,EAAE;YACxB;QACJ;IAEJ,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,8BAA8B;QAE5C,uCAAuC;QACvC,IAAI,MAAM,IAAI,KAAK,6BAA6B;YAC5C,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,OAAO;YAA8B,GACvC;gBAAE,QAAQ;YAAI;QAEtB;QACA,IAAI,MAAM,IAAI,KAAK,sBAAsB;YACrC,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,OAAO;YAA2C,GACpD;gBAAE,QAAQ;YAAI;QAEtB;QACA,IAAI,MAAM,IAAI,KAAK,sBAAsB;YACrC,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,OAAO;YAAwB,GACjC;gBAAE,QAAQ;YAAI;QAEtB;QAEA,OAAO,gJAAY,CAAC,IAAI,CACpB;YAAE,OAAO,MAAM,OAAO,IAAI;QAA8B,GACxD;YAAE,QAAQ;QAAI;IAEtB;AACJ"}}]
}