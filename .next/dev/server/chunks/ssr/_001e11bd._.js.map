{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/7mood/Desktop/test%207.5/main/components/ui/table.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Table({ className, ...props }: React.ComponentProps<'table'>) {\n  return (\n    <div\n      data-slot=\"table-container\"\n      className=\"relative w-full overflow-x-auto\"\n    >\n      <table\n        data-slot=\"table\"\n        className={cn('w-full caption-bottom text-sm', className)}\n        {...props}\n      />\n    </div>\n  )\n}\n\nfunction TableHeader({ className, ...props }: React.ComponentProps<'thead'>) {\n  return (\n    <thead\n      data-slot=\"table-header\"\n      className={cn('[&_tr]:border-b', className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableBody({ className, ...props }: React.ComponentProps<'tbody'>) {\n  return (\n    <tbody\n      data-slot=\"table-body\"\n      className={cn('[&_tr:last-child]:border-0', className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableFooter({ className, ...props }: React.ComponentProps<'tfoot'>) {\n  return (\n    <tfoot\n      data-slot=\"table-footer\"\n      className={cn(\n        'bg-muted/50 border-t font-medium [&>tr]:last:border-b-0',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableRow({ className, ...props }: React.ComponentProps<'tr'>) {\n  return (\n    <tr\n      data-slot=\"table-row\"\n      className={cn(\n        'hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableHead({ className, ...props }: React.ComponentProps<'th'>) {\n  return (\n    <th\n      data-slot=\"table-head\"\n      className={cn(\n        'text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCell({ className, ...props }: React.ComponentProps<'td'>) {\n  return (\n    <td\n      data-slot=\"table-cell\"\n      className={cn(\n        'p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCaption({\n  className,\n  ...props\n}: React.ComponentProps<'caption'>) {\n  return (\n    <caption\n      data-slot=\"table-caption\"\n      className={cn('text-muted-foreground mt-4 text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAIA;AAJA;;;AAMA,SAAS,MAAM,EAAE,SAAS,EAAE,GAAG,OAAsC;IACnE,qBACE,8OAAC;QACC,aAAU;QACV,WAAU;kBAEV,cAAA,8OAAC;YACC,aAAU;YACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIjB;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,mBAAmB;QAChC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAsC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,2DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAmC;IACnE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,+EACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,sJACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OAC6B;IAChC,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/7mood/Desktop/test%207.5/main/components/ui/select.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as SelectPrimitive from '@radix-ui/react-select'\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Select({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\n}\n\nfunction SelectGroup({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\n}\n\nfunction SelectValue({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\n}\n\nfunction SelectTrigger({\n  className,\n  size = 'default',\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\n  size?: 'sm' | 'default'\n}) {\n  return (\n    <SelectPrimitive.Trigger\n      data-slot=\"select-trigger\"\n      data-size={size}\n      className={cn(\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <SelectPrimitive.Icon asChild>\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  )\n}\n\nfunction SelectContent({\n  className,\n  children,\n  position = 'popper',\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\n  return (\n    <SelectPrimitive.Portal>\n      <SelectPrimitive.Content\n        data-slot=\"select-content\"\n        className={cn(\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md',\n          position === 'popper' &&\n            'data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1',\n          className,\n        )}\n        position={position}\n        {...props}\n      >\n        <SelectScrollUpButton />\n        <SelectPrimitive.Viewport\n          className={cn(\n            'p-1',\n            position === 'popper' &&\n              'h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1',\n          )}\n        >\n          {children}\n        </SelectPrimitive.Viewport>\n        <SelectScrollDownButton />\n      </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n  )\n}\n\nfunction SelectLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\n  return (\n    <SelectPrimitive.Label\n      data-slot=\"select-label\"\n      className={cn('text-muted-foreground px-2 py-1.5 text-xs', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\n  return (\n    <SelectPrimitive.Item\n      data-slot=\"select-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\n        <SelectPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </SelectPrimitive.ItemIndicator>\n      </span>\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n    </SelectPrimitive.Item>\n  )\n}\n\nfunction SelectSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\n  return (\n    <SelectPrimitive.Separator\n      data-slot=\"select-separator\"\n      className={cn('bg-border pointer-events-none -mx-1 my-1 h-px', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectScrollUpButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\n  return (\n    <SelectPrimitive.ScrollUpButton\n      data-slot=\"select-scroll-up-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronUpIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollUpButton>\n  )\n}\n\nfunction SelectScrollDownButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\n  return (\n    <SelectPrimitive.ScrollDownButton\n      data-slot=\"select-scroll-down-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronDownIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollDownButton>\n  )\n}\n\nexport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectLabel,\n  SelectScrollDownButton,\n  SelectScrollUpButton,\n  SelectSeparator,\n  SelectTrigger,\n  SelectValue,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAAA;AAAA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,8OAAC,0KAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8OAAC,2KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8OAAC,2KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,OAAO,SAAS,EAChB,QAAQ,EACR,GAAG,OAGJ;IACC,qBACE,8OAAC,6KAAuB;QACtB,aAAU;QACV,aAAW;QACX,WAAW,IAAA,kHAAE,EACX,gzBACA;QAED,GAAG,KAAK;;YAER;0BACD,8OAAC,0KAAoB;gBAAC,OAAO;0BAC3B,cAAA,8OAAC,2OAAe;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAInC;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,WAAW,QAAQ,EACnB,GAAG,OACkD;IACrD,qBACE,8OAAC,4KAAsB;kBACrB,cAAA,8OAAC,6KAAuB;YACtB,aAAU;YACV,WAAW,IAAA,kHAAE,EACX,ijBACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,8OAAC;;;;;8BACD,8OAAC,8KAAwB;oBACvB,WAAW,IAAA,kHAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,8OAAC;;;;;;;;;;;;;;;;AAIT;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,2KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OAC+C;IAClD,qBACE,8OAAC,0KAAoB;QACnB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,6aACA;QAED,GAAG,KAAK;;0BAET,8OAAC;gBAAK,WAAU;0BACd,cAAA,8OAAC,mLAA6B;8BAC5B,cAAA,8OAAC,qNAAS;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGzB,8OAAC,8KAAwB;0BAAE;;;;;;;;;;;;AAGjC;AAEA,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OACoD;IACvD,qBACE,8OAAC,+KAAyB;QACxB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iDAAiD;QAC9D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,qBAAqB,EAC5B,SAAS,EACT,GAAG,OACyD;IAC5D,qBACE,8OAAC,oLAA8B;QAC7B,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,qOAAa;YAAC,WAAU;;;;;;;;;;;AAG/B;AAEA,SAAS,uBAAuB,EAC9B,SAAS,EACT,GAAG,OAC2D;IAC9D,qBACE,8OAAC,sLAAgC;QAC/B,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,2OAAe;YAAC,WAAU;;;;;;;;;;;AAGjC"}},
    {"offset": {"line": 361, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/7mood/Desktop/test%207.5/main/components/ui/dialog.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as DialogPrimitive from '@radix-ui/react-dialog'\nimport { XIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg',\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn('flex flex-col gap-2 text-center sm:text-left', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        'flex flex-col-reverse gap-2 sm:flex-row sm:justify-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn('text-lg leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,8OAAC,0KAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,8OAAC,6KAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;AAEA,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,8OAAC,4KAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8OAAC,2KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,8OAAC,6KAAuB;QACtB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGJ;IACC,qBACE,8OAAC;QAAa,aAAU;;0BACtB,8OAAC;;;;;0BACD,8OAAC,6KAAuB;gBACtB,aAAU;gBACV,WAAW,IAAA,kHAAE,EACX,+WACA;gBAED,GAAG,KAAK;;oBAER;oBACA,iCACC,8OAAC,2KAAqB;wBACpB,aAAU;wBACV,WAAU;;0CAEV,8OAAC,yMAAK;;;;;0CACN,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,2KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,8OAAC,iLAA2B;QAC1B,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 543, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/7mood/Desktop/test%207.5/main/lib/smsService.ts"],"sourcesContent":["/**\r\n * WhatsApp Messaging Service - Free Alternative to SMS\r\n * Uses WhatsApp Web API for sending messages\r\n * Popular and free in UAE\r\n */\r\n\r\nexport interface WhatsAppMessage {\r\n    to: string\r\n    body: string\r\n}\r\n\r\n/**\r\n * Format phone number for WhatsApp (removes +, spaces, dashes)\r\n */\r\nexport function formatPhoneForWhatsApp(phone: string): string {\r\n    // Remove all non-numeric characters\r\n    let cleaned = phone.replace(/\\D/g, \"\")\r\n\r\n    // Remove leading zeros\r\n    cleaned = cleaned.replace(/^0+/, \"\")\r\n\r\n    // Add UAE country code if not present\r\n    if (!cleaned.startsWith(\"971\")) {\r\n        cleaned = `971${cleaned}`\r\n    }\r\n\r\n    return cleaned\r\n}\r\n\r\n/**\r\n * Generate WhatsApp click-to-chat URL\r\n * This opens WhatsApp with a pre-filled message\r\n */\r\nexport function generateWhatsAppUrl(phone: string, message: string): string {\r\n    const formattedPhone = formatPhoneForWhatsApp(phone)\r\n    const encodedMessage = encodeURIComponent(message)\r\n    return `https://wa.me/${formattedPhone}?text=${encodedMessage}`\r\n}\r\n\r\n/**\r\n * Open WhatsApp in new window (for client-side use)\r\n */\r\nexport function openWhatsApp(phone: string, message: string): void {\n    const url = generateWhatsAppUrl(phone, message)\n    window.open(url, \"_blank\", \"noopener,noreferrer\")\n}\n\r\n/**\r\n * Send WhatsApp via API (for server-side automation)\r\n * This requires WhatsApp Business API setup\r\n */\r\nexport async function sendWhatsApp(\r\n    to: string,\r\n    body: string\r\n): Promise<{ success: boolean; url?: string; error?: string }> {\r\n    try {\r\n        const response = await fetch(\"/api/whatsapp/send\", {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ to, body })\r\n        })\r\n\r\n        const result = await response.json()\r\n\r\n        if (!response.ok) {\r\n            return { success: false, error: result.error || \"Failed to send\" }\r\n        }\r\n\r\n        return { success: true, url: result.url }\r\n    } catch (error) {\r\n        return { success: false, error: \"Failed to send message\" }\r\n    }\r\n}\r\n\r\n/**\r\n * WhatsApp Message Templates - Pre-written for common scenarios\r\n */\r\nexport const WhatsAppTemplates = {\r\n    orderConfirmation: (orderId: string, customerName: string) =>\r\n        `ŸÖÿ±ÿ≠ÿ®ÿßŸã ${customerName}! üëã\r\n\r\nÿ™ŸÖ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿ∑ŸÑÿ® ÿßŸÑÿ•ÿµŸÑÿßÿ≠ ÿ±ŸÇŸÖ #${orderId} ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ\r\n\r\nÿ≥Ÿäÿ™ŸÖ ÿ™ÿπŸäŸäŸÜ ŸÅŸÜŸä ŸÑŸÉ ŸÇÿ±Ÿäÿ®ÿßŸã.\r\n\r\nŸÑŸÑŸÖÿ™ÿßÿ®ÿπÿ©: kbi.ae/track\r\n\r\nKBI Repair Services`,\r\n\r\n    technicianAssigned: (orderId: string, techName: string, techPhone: string) =>\r\n        `ÿ£ÿÆÿ®ÿßÿ± ÿ≥ÿßÿ±ÿ©! üéâ\r\n\r\nÿ™ŸÖ ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÅŸÜŸä *${techName}* ŸÑÿ∑ŸÑÿ®ŸÉ #${orderId}\r\n\r\nüìû ŸÑŸÑÿ™ŸàÿßÿµŸÑ: ${techPhone}\r\n\r\nÿ≥ŸäÿµŸÑ ÿ•ŸÑŸäŸÉ ŸÇÿ±Ÿäÿ®ÿßŸã!`,\r\n\r\n    onTheWay: (orderId: string, techName: string, eta?: string) =>\r\n        `üöó ÿßŸÑŸÅŸÜŸä ${techName} ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ ÿ•ŸÑŸäŸÉ!\r\n\r\nÿ∑ŸÑÿ®: #${orderId}\r\n${eta ? `ÿßŸÑŸàÿµŸàŸÑ ÿßŸÑŸÖÿ™ŸàŸÇÿπ: ${eta}` : \"\"}\r\n\r\nŸäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ™ŸàŸÅÿ±ŸÉŸÖ.`,\r\n\r\n    repairStarted: (orderId: string) =>\r\n        `üîß ÿ®ÿØÿ£ ÿßŸÑÿπŸÖŸÑ ÿπŸÑŸâ ÿ∑ŸÑÿ®ŸÉ #${orderId}\r\n\r\nÿ≥ŸÜŸèÿπŸÑŸÖŸÉ ŸÅŸàÿ± ÿßŸÑÿßŸÜÿ™Ÿáÿßÿ°.`,\r\n\r\n    repairComplete: (orderId: string, rateLink: string) =>\r\n        `‚úÖ ÿ™ŸÖ ÿ•ŸÜÿ¨ÿßÿ≤ ÿßŸÑÿ•ÿµŸÑÿßÿ≠ ÿ®ŸÜÿ¨ÿßÿ≠!\r\n\r\nÿ∑ŸÑÿ®: #${orderId}\r\n\r\n‚≠ê ŸÇŸäŸëŸÖ ÿ™ÿ¨ÿ±ÿ®ÿ™ŸÉ: ${rateLink}\r\n\r\nÿ¥ŸÉÿ±ÿßŸã ŸÑÿßÿÆÿ™Ÿäÿßÿ±ŸÉ KBI Repair!`,\r\n\r\n    waitingParts: (orderId: string) =>\r\n        `‚è≥ ÿ™ÿ≠ÿØŸäÿ´ ŸÑÿ∑ŸÑÿ®ŸÉ #${orderId}\r\n\r\nŸÜÿ≠ŸÜ ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ŸàÿµŸàŸÑ ŸÇÿ∑ÿπ ÿßŸÑÿ∫Ÿäÿßÿ±.\r\nÿ≥ŸÜŸèÿπŸÑŸÖŸÉ ŸÅŸàÿ± ÿßÿ≥ÿ™ÿ¶ŸÜÿßŸÅ ÿßŸÑÿπŸÖŸÑ.`\r\n}\r\n\r\n/**\r\n * Get WhatsApp business number for company\r\n */\r\nexport const COMPANY_WHATSAPP = \"+971501234567\" // Update with real number\r\n"],"names":[],"mappings":"AAAA;;;;CAIC;;;;;;;;;;;;;;AAUM,SAAS,uBAAuB,KAAa;IAChD,oCAAoC;IACpC,IAAI,UAAU,MAAM,OAAO,CAAC,OAAO;IAEnC,uBAAuB;IACvB,UAAU,QAAQ,OAAO,CAAC,OAAO;IAEjC,sCAAsC;IACtC,IAAI,CAAC,QAAQ,UAAU,CAAC,QAAQ;QAC5B,UAAU,CAAC,GAAG,EAAE,SAAS;IAC7B;IAEA,OAAO;AACX;AAMO,SAAS,oBAAoB,KAAa,EAAE,OAAe;IAC9D,MAAM,iBAAiB,uBAAuB;IAC9C,MAAM,iBAAiB,mBAAmB;IAC1C,OAAO,CAAC,cAAc,EAAE,eAAe,MAAM,EAAE,gBAAgB;AACnE;AAKO,SAAS,aAAa,KAAa,EAAE,OAAe;IACvD,MAAM,MAAM,oBAAoB,OAAO;IACvC,OAAO,IAAI,CAAC,KAAK,UAAU;AAC/B;AAMO,eAAe,aAClB,EAAU,EACV,IAAY;IAEZ,IAAI;QACA,MAAM,WAAW,MAAM,MAAM,sBAAsB;YAC/C,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAI;YAAK;QACpC;QAEA,MAAM,SAAS,MAAM,SAAS,IAAI;QAElC,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,OAAO;gBAAE,SAAS;gBAAO,OAAO,OAAO,KAAK,IAAI;YAAiB;QACrE;QAEA,OAAO;YAAE,SAAS;YAAM,KAAK,OAAO,GAAG;QAAC;IAC5C,EAAE,OAAO,OAAO;QACZ,OAAO;YAAE,SAAS;YAAO,OAAO;QAAyB;IAC7D;AACJ;AAKO,MAAM,oBAAoB;IAC7B,mBAAmB,CAAC,SAAiB,eACjC,CAAC,OAAO,EAAE,aAAa;;2BAEJ,EAAE,QAAQ;;;;;;mBAMlB,CAAC;IAEhB,oBAAoB,CAAC,SAAiB,UAAkB,YACpD,CAAC;;gBAEO,EAAE,SAAS,SAAS,EAAE,QAAQ;;YAElC,EAAE,UAAU;;iBAEP,CAAC;IAEd,UAAU,CAAC,SAAiB,UAAkB,MAC1C,CAAC,SAAS,EAAE,SAAS;;MAEvB,EAAE,QAAQ;AAChB,EAAE,MAAM,CAAC,gBAAgB,EAAE,KAAK,GAAG,GAAG;;sBAEhB,CAAC;IAEnB,eAAe,CAAC,UACZ,CAAC,uBAAuB,EAAE,QAAQ;;qBAErB,CAAC;IAElB,gBAAgB,CAAC,SAAiB,WAC9B,CAAC;;MAEH,EAAE,QAAQ;;eAED,EAAE,SAAS;;0BAEA,CAAC;IAEvB,cAAc,CAAC,UACX,CAAC,eAAe,EAAE,QAAQ;;;0BAGR,CAAC;AAC3B;AAKO,MAAM,mBAAmB,gBAAgB,0BAA0B"}},
    {"offset": {"line": 655, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/7mood/Desktop/test%207.5/main/lib/auditService.ts"],"sourcesContent":["/**\r\n * Audit Service for logging admin actions\r\n */\r\n\r\nimport { collection, addDoc, query, where, orderBy, getDocs, Timestamp, limit } from \"firebase/firestore\"\r\nimport { db } from \"@/firebase/firebaseConfig\"\r\n\r\nexport interface AuditLog {\r\n    id?: string\r\n    action: string\r\n    category: \"order\" | \"technician\" | \"inventory\" | \"settings\" | \"auth\" | \"system\"\r\n    userId: string\r\n    userEmail: string\r\n    targetId?: string\r\n    targetType?: string\r\n    details?: Record<string, any>\r\n    ipAddress?: string\r\n    timestamp: Date\r\n}\r\n\r\n/**\r\n * Log an admin action\r\n */\r\nexport async function logAction(\r\n    action: string,\r\n    category: AuditLog[\"category\"],\r\n    userId: string,\r\n    userEmail: string,\r\n    options?: {\r\n        targetId?: string\r\n        targetType?: string\r\n        details?: Record<string, any>\r\n    }\r\n): Promise<void> {\r\n    try {\r\n        await addDoc(collection(db, \"audit_logs\"), {\r\n            action,\r\n            category,\r\n            userId,\r\n            userEmail,\r\n            targetId: options?.targetId || null,\r\n            targetType: options?.targetType || null,\r\n            details: options?.details || null,\r\n            timestamp: Timestamp.now()\r\n        })\r\n    } catch (error) {\r\n        console.error(\"Failed to log audit action:\", error)\r\n    }\r\n}\r\n\r\n/**\r\n * Get audit logs with filters\r\n */\r\nexport async function getAuditLogs(filters?: {\r\n    category?: AuditLog[\"category\"]\r\n    userId?: string\r\n    startDate?: Date\r\n    endDate?: Date\r\n    limitCount?: number\n}): Promise<AuditLog[]> {\n    try {\n        const q = query(\n            collection(db, \"audit_logs\"),\n            orderBy(\"timestamp\", \"desc\"),\n            limit(filters?.limitCount || 100)\n        )\n\r\n        // Note: Firestore requires composite indexes for multiple where clauses\r\n        // For production, create necessary indexes\r\n\r\n        const snapshot = await getDocs(q)\r\n        return snapshot.docs.map(doc => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n            timestamp: doc.data().timestamp.toDate()\r\n        })) as AuditLog[]\r\n    } catch (error) {\r\n        console.error(\"Failed to fetch audit logs:\", error)\r\n        return []\r\n    }\r\n}\r\n\r\n/**\r\n * Predefined action types for consistency\r\n */\r\nexport const AuditActions = {\n    // Orders\r\n    ORDER_CREATED: \"order_created\",\r\n    ORDER_UPDATED: \"order_updated\",\r\n    ORDER_DELETED: \"order_deleted\",\r\n    ORDER_ASSIGNED: \"order_assigned\",\r\n    ORDER_STATUS_CHANGED: \"order_status_changed\",\r\n\r\n    // Technicians\r\n    TECHNICIAN_CREATED: \"technician_created\",\r\n    TECHNICIAN_UPDATED: \"technician_updated\",\r\n    TECHNICIAN_DELETED: \"technician_deleted\",\r\n\r\n    // Inventory\r\n    INVENTORY_ADDED: \"inventory_added\",\r\n    INVENTORY_UPDATED: \"inventory_updated\",\r\n    INVENTORY_DELETED: \"inventory_deleted\",\r\n\r\n    // Auth\r\n    USER_LOGIN: \"user_login\",\r\n    USER_LOGOUT: \"user_logout\",\n    PASSWORD_CHANGED: \"password_changed\",\n    REQUEST_PASSWORD_RESET: \"request_password_reset\",\n    OTP_SENT: \"otp_sent\",\n    OTP_VERIFIED: \"otp_verified\",\n    PASSWORD_RESET_SUCCESS: \"password_reset_success\",\n    PASSWORD_RESET_FAILED: \"password_reset_failed\",\n\r\n    // Settings\r\n    SETTINGS_UPDATED: \"settings_updated\",\r\n\r\n    // System\r\n    EXPORT_GENERATED: \"export_generated\",\r\n    EMAIL_SENT: \"email_sent\"\r\n} as const\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;AAED;AAAA;AACA;;;AAkBO,eAAe,UAClB,MAAc,EACd,QAA8B,EAC9B,MAAc,EACd,SAAiB,EACjB,OAIC;IAED,IAAI;QACA,MAAM,IAAA,2KAAM,EAAC,IAAA,+KAAU,EAAC,gIAAE,EAAE,eAAe;YACvC;YACA;YACA;YACA;YACA,UAAU,SAAS,YAAY;YAC/B,YAAY,SAAS,cAAc;YACnC,SAAS,SAAS,WAAW;YAC7B,WAAW,8KAAS,CAAC,GAAG;QAC5B;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,+BAA+B;IACjD;AACJ;AAKO,eAAe,aAAa,OAMlC;IACG,IAAI;QACA,MAAM,IAAI,IAAA,0KAAK,EACX,IAAA,+KAAU,EAAC,gIAAE,EAAE,eACf,IAAA,4KAAO,EAAC,aAAa,SACrB,IAAA,0KAAK,EAAC,SAAS,cAAc;QAGjC,wEAAwE;QACxE,2CAA2C;QAE3C,MAAM,WAAW,MAAM,IAAA,4KAAO,EAAC;QAC/B,OAAO,SAAS,IAAI,CAAC,GAAG,CAAC,CAAA,MAAO,CAAC;gBAC7B,IAAI,IAAI,EAAE;gBACV,GAAG,IAAI,IAAI,EAAE;gBACb,WAAW,IAAI,IAAI,GAAG,SAAS,CAAC,MAAM;YAC1C,CAAC;IACL,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO,EAAE;IACb;AACJ;AAKO,MAAM,eAAe;IACxB,SAAS;IACT,eAAe;IACf,eAAe;IACf,eAAe;IACf,gBAAgB;IAChB,sBAAsB;IAEtB,cAAc;IACd,oBAAoB;IACpB,oBAAoB;IACpB,oBAAoB;IAEpB,YAAY;IACZ,iBAAiB;IACjB,mBAAmB;IACnB,mBAAmB;IAEnB,OAAO;IACP,YAAY;IACZ,aAAa;IACb,kBAAkB;IAClB,wBAAwB;IACxB,UAAU;IACV,cAAc;IACd,wBAAwB;IACxB,uBAAuB;IAEvB,WAAW;IACX,kBAAkB;IAElB,SAAS;IACT,kBAAkB;IAClB,YAAY;AAChB"}},
    {"offset": {"line": 736, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/7mood/Desktop/test%207.5/main/components/ui/invoice.tsx"],"sourcesContent":["\"use client\"\n\nimport { useMemo } from \"react\"\nimport { useT } from \"@/components/language-provider\"\n\ntype InvoiceItem = {\n  description: string\n  category?: string\n  quantity: number\n  unitPrice: number\n  total: number\n}\n\ntype Props = {\n  order: any\n  items: InvoiceItem[]\n  invoiceNumber: string\n  invoiceDate: string | Date\n  language: \"en\" | \"ar\" | \"both\"\n  discount?: number\n  vatEnabled?: boolean\n  vatRate?: number\n  warrantyPeriod?: string\n  adminNotes?: string\n  disclaimerText?: string\n}\n\nexport function FinalInvoice(props: Props) {\n  const t = useT()\n  const {\n    order,\n    items,\n    invoiceNumber,\n    invoiceDate,\n    language,\n    discount = 0,\n    vatEnabled = false,\n    vatRate = 0,\n    warrantyPeriod = \"3 months\",\n    adminNotes = \"\",\n    disclaimerText = t(\"Payment due upon completion of repair.\")\n  } = props\n\n  const totals = useMemo(() => {\n    const subtotal = items.reduce((s, i) => s + Number(i.total || i.unitPrice * i.quantity), 0)\n    const afterDiscount = subtotal - Number(discount || 0)\n    const vatAmount = vatEnabled ? afterDiscount * Number(vatRate || 0) : 0\n    const finalTotal = afterDiscount + vatAmount\n    return { subtotal, vatAmount, finalTotal }\n  }, [items, discount, vatEnabled, vatRate])\n\n  const qrData = useMemo(() => {\n    const d = `KBI Invoice ${invoiceNumber} | Order ${order?.orderId || order?.id}`\n    return `https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=${encodeURIComponent(d)}`\n  }, [invoiceNumber, order])\n\n  const Header = () => (\n    <div className=\"flex items-start justify-between\">\n      <div>\n        <p className=\"text-xl font-bold\">KBI</p>\n        <p className=\"text-sm\">{t(\"On-Site Repair Service\")}</p>\n        <p className=\"text-sm\">Abu Dhabi ‚Äì UAE</p>\n        <p className=\"text-sm\">+971 50 731 3446</p>\n      </div>\n      <div className=\"text-right\">\n        <p className=\"font-semibold\">{t(\"Invoice Number\")}: {invoiceNumber}</p>\n        <p className=\"text-sm\">{t(\"Order ID\")}: {order?.orderId || order?.id}</p>\n        <p className=\"text-sm\">{t(\"Invoice Date\")}: {typeof invoiceDate === \"string\" ? invoiceDate : new Date(invoiceDate).toLocaleDateString()}</p>\n      </div>\n    </div>\n  )\n\n  const CustomerDevice = () => (\n    <div className=\"grid grid-cols-2 gap-4\">\n      <div className=\"space-y-1\">\n        <p className=\"text-sm font-semibold\">{t(\"Customer Information\")}</p>\n        <p className=\"text-sm\">{t(\"Customer Name\")}: {order?.customerName}</p>\n        <p className=\"text-sm\">{t(\"Phone Number\")}: {order?.customerPhone}</p>\n        <p className=\"text-sm\">{t(\"Service Address\")}: {order?.location || order?.address || \"\"}</p>\n      </div>\n      <div className=\"space-y-1\">\n        <p className=\"text-sm font-semibold\">{t(\"Device Information\")}</p>\n        <p className=\"text-sm\">{t(\"Device Type\")}: {order?.deviceType || order?.device}</p>\n        <p className=\"text-sm\">{t(\"Brand\")}: {order?.brand}</p>\n        <p className=\"text-sm\">{t(\"Model\")}: {order?.model}</p>\n        <p className=\"text-sm\">{t(\"Serial Number (optional)\")}: {order?.serial || \"\"}</p>\n      </div>\n    </div>\n  )\n\n  const ItemsTable = () => (\n    <div className=\"mt-4\">\n      <div className=\"grid grid-cols-12 gap-2 border-b py-2 text-xs font-semibold\">\n        <div className=\"col-span-5\">{t(\"Description\")}</div>\n        <div className=\"col-span-2\">{t(\"Type\")}</div>\n        <div className=\"col-span-1 text-right\">{t(\"Qty\")}</div>\n        <div className=\"col-span-2 text-right\">{t(\"Unit Price (AED)\")}</div>\n        <div className=\"col-span-2 text-right\">{t(\"Total (AED)\")}</div>\n      </div>\n      {items.map((i, idx) => (\n        <div key={idx} className=\"grid grid-cols-12 gap-2 border-b py-2 text-sm\">\n          <div className=\"col-span-5\">{i.description}</div>\n          <div className=\"col-span-2\">{i.category || \"\"}</div>\n          <div className=\"col-span-1 text-right\">{i.quantity}</div>\n          <div className=\"col-span-2 text-right\">{Number(i.unitPrice).toFixed(2)}</div>\n          <div className=\"col-span-2 text-right\">{Number(i.total || i.unitPrice * i.quantity).toFixed(2)}</div>\n        </div>\n      ))}\n    </div>\n  )\n\n  const Summary = () => (\n    <div className=\"mt-4 w-full flex justify-end\">\n      <div className=\"w-64 space-y-1 text-sm\">\n        <div className=\"flex justify-between\"><span>{t(\"Subtotal\")}</span><span>{totals.subtotal.toFixed(2)}</span></div>\n        <div className=\"flex justify-between\"><span>{t(\"Discount\")}</span><span>{Number(discount || 0).toFixed(2)}</span></div>\n        <div className=\"flex justify-between\"><span>{t(\"VAT\")}</span><span>{totals.vatAmount.toFixed(2)}</span></div>\n        <div className=\"flex justify-between font-semibold\"><span>{t(\"Final Total Price (AED)\")}</span><span>{totals.finalTotal.toFixed(2)}</span></div>\n      </div>\n    </div>\n  )\n\n  const Notes = () => (\n    <div className=\"mt-6 grid grid-cols-2 gap-4 text-sm\">\n      <div>\n        <p className=\"font-semibold mb-1\">{t(\"Warranty & Notes\")}</p>\n        <p>{t(\"Warranty Period\")}: {warrantyPeriod}</p>\n        {adminNotes ? <p className=\"mt-2\">{t(\"Admin Notes\")}: {adminNotes}</p> : null}\n      </div>\n      <div className=\"text-right\">\n        <img src={qrData} alt=\"QR\" className=\"inline-block\" />\n      </div>\n    </div>\n  )\n\n  const Footer = () => (\n    <div className=\"mt-6 pt-4 border-t text-sm\">\n      <p>{disclaimerText}</p>\n      <p className=\"mt-1\">{t(\"Thank you for choosing KBI.\")}</p>\n    </div>\n  )\n\n  const Block = () => (\n    <div className=\"bg-white text-black p-6 rounded shadow-sm\">\n      <Header />\n      <div className=\"mt-6\">\n        <CustomerDevice />\n      </div>\n      <ItemsTable />\n      <Summary />\n      <Notes />\n      <Footer />\n      <div className=\"mt-6 grid grid-cols-2 gap-6\">\n        <div className=\"border-t pt-6\">\n          <p className=\"text-sm font-semibold\">{t(\"Customer Signature\")}</p>\n          <div className=\"h-16 border rounded\"></div>\n        </div>\n        <div className=\"border-t pt-6\">\n          <p className=\"text-sm font-semibold\">{t(\"Technician Signature\")}</p>\n          <div className=\"h-16 border rounded\"></div>\n        </div>\n      </div>\n    </div>\n  )\n\n  if (language === \"both\") {\n    return (\n      <div className=\"space-y-8\">\n        <Block />\n        <div dir=\"rtl\" className=\"bg-white text-black p-6 rounded shadow-sm\">\n          <Header />\n          <div className=\"mt-6\">\n            <CustomerDevice />\n          </div>\n          <ItemsTable />\n          <Summary />\n          <Notes />\n          <Footer />\n          <div className=\"mt-6 grid grid-cols-2 gap-6\">\n            <div className=\"border-t pt-6\">\n              <p className=\"text-sm font-semibold\">{t(\"Customer Signature\")}</p>\n              <div className=\"h-16 border rounded\"></div>\n            </div>\n            <div className=\"border-t pt-6\">\n              <p className=\"text-sm font-semibold\">{t(\"Technician Signature\")}</p>\n              <div className=\"h-16 border rounded\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  if (language === \"ar\") {\n    return (\n      <div dir=\"rtl\" className=\"bg-white text-black p-6 rounded shadow-sm\">\n        <Header />\n        <div className=\"mt-6\">\n          <CustomerDevice />\n        </div>\n        <ItemsTable />\n        <Summary />\n        <Notes />\n        <Footer />\n        <div className=\"mt-6 grid grid-cols-2 gap-6\">\n          <div className=\"border-t pt-6\">\n            <p className=\"text-sm font-semibold\">{t(\"Customer Signature\")}</p>\n            <div className=\"h-16 border rounded\"></div>\n          </div>\n          <div className=\"border-t pt-6\">\n            <p className=\"text-sm font-semibold\">{t(\"Technician Signature\")}</p>\n            <div className=\"h-16 border rounded\"></div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return <Block />\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1636, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/7mood/Desktop/test%207.5/main/lib/firestore/services/notificationService.ts"],"sourcesContent":["import {\r\n    collection,\r\n    doc,\r\n    addDoc,\r\n    updateDoc,\r\n    deleteDoc,\r\n    getDocs,\r\n    onSnapshot,\r\n    query,\r\n    where,\r\n    orderBy,\r\n    Timestamp,\r\n    limit\r\n} from \"firebase/firestore\"\nimport { db, isMockMode } from \"@/firebase/firebaseConfig\"\n\r\nexport interface Notification {\n    id?: string\n    type: \"order_created\" | \"status_update\" | \"assignment\" | \"low_stock\" | \"system\"\n    title: string\n    message: string\n    read: boolean\n    userId?: string\n    role?: \"admin\" | \"technician\" | \"customer\" | \"super_admin\"\n    orderId?: string\n    link?: string\n    createdAt?: Date\n}\n\r\n// Create a notification\r\nexport async function createNotification(notification: Omit<Notification, \"id\" | \"read\" | \"createdAt\">) {\r\n    const docRef = await addDoc(collection(db, \"notifications\"), {\r\n        ...notification,\r\n        read: false,\r\n        createdAt: Timestamp.now()\r\n    })\r\n    return docRef.id\r\n}\r\n\r\n// Mark notification as read\r\nexport async function markAsRead(notificationId: string) {\r\n    await updateDoc(doc(db, \"notifications\", notificationId), {\r\n        read: true\r\n    })\r\n}\r\n\r\n// Mark all notifications as read for a user\r\nexport async function markAllAsRead(userId: string) {\r\n    const snapshot = await getDocs(\r\n        query(collection(db, \"notifications\"), where(\"userId\", \"==\", userId), where(\"read\", \"==\", false))\r\n    )\r\n\r\n    const updates = snapshot.docs.map(d => updateDoc(d.ref, { read: true }))\r\n    await Promise.all(updates)\r\n}\r\n\r\n// Delete a notification\r\nexport async function deleteNotification(id: string) {\r\n    await deleteDoc(doc(db, \"notifications\", id))\r\n}\r\n\r\n// Get unread count for user\r\nexport async function getUnreadCount(userId: string) {\r\n    const snapshot = await getDocs(\r\n        query(collection(db, \"notifications\"), where(\"userId\", \"==\", userId), where(\"read\", \"==\", false))\r\n    )\r\n    return snapshot.size\r\n}\r\n\r\n// Subscribe to notifications for a user\r\nexport function subscribeToNotifications(userId: string, callback: (notifications: Notification[]) => void) {\n    if (typeof window !== \"undefined\" && isMockMode) {\n        callback([]);\n        return () => { };\n    }\n    return onSnapshot(\n        query(\n            collection(db, \"notifications\"),\n            where(\"userId\", \"==\", userId),\n            orderBy(\"createdAt\", \"desc\"),\n            limit(50)\n        ),\n        (snapshot) => {\n            const notifications = snapshot.docs.map(d => ({\n                id: d.id,\n                ...d.data(),\n                createdAt: d.data().createdAt?.toDate()\n            } as Notification))\n            callback(notifications)\n        }\n    )\n}\n\r\n// Subscribe to notifications for admin (all admin notifications)\r\nexport function subscribeToAdminNotifications(callback: (notifications: Notification[]) => void) {\n    if (typeof window !== \"undefined\" && isMockMode) {\n        callback([]);\n        return () => { };\n    }\n    return onSnapshot(\n        query(\n            collection(db, \"notifications\"),\n            where(\"role\", \"==\", \"admin\"),\n            orderBy(\"createdAt\", \"desc\"),\n            limit(50)\n        ),\n        (snapshot) => {\n            const notifications = snapshot.docs.map(d => ({\n                id: d.id,\n                ...d.data(),\n                createdAt: d.data().createdAt?.toDate()\n            } as Notification))\n            callback(notifications)\n        }\n    )\n}\n\r\n// Helper functions to create specific notification types\r\nexport async function notifyOrderCreated(orderId: string, customerName: string) {\r\n    await createNotification({\r\n        type: \"order_created\",\r\n        title: \"New Order\",\r\n        message: `New order ${orderId} from ${customerName}`,\r\n        role: \"admin\",\r\n        orderId,\r\n        link: `/admin/orders`\r\n    })\r\n}\r\n\r\nexport async function notifyStatusUpdate(orderId: string, newStatus: string, customerId?: string) {\r\n    if (customerId) {\r\n        await createNotification({\r\n            type: \"status_update\",\r\n            title: \"Order Status Updated\",\r\n            message: `Your order ${orderId} is now: ${newStatus}`,\r\n            userId: customerId,\r\n            role: \"customer\",\r\n            orderId,\r\n            link: `/track?id=${orderId}`\r\n        })\r\n    }\r\n}\r\n\r\nexport async function notifyTechnicianAssigned(orderId: string, technicianId: string, technicianName: string) {\r\n    await createNotification({\r\n        type: \"assignment\",\r\n        title: \"New Assignment\",\r\n        message: `You have been assigned to order ${orderId}`,\r\n        userId: technicianId,\r\n        role: \"technician\",\r\n        orderId,\r\n        link: `/technician/orders`\r\n    })\r\n}\r\n\r\nexport async function notifyLowStock(itemName: string, currentQty: number) {\r\n    await createNotification({\r\n        type: \"low_stock\",\r\n        title: \"Low Stock Alert\",\r\n        message: `${itemName} is running low (${currentQty} remaining)`,\r\n        role: \"admin\",\r\n        link: `/admin/inventory`\r\n    })\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1763, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/7mood/Desktop/test%207.5/main/lib/firestore/services/orderService.ts"],"sourcesContent":["import {\r\n    collection,\r\n    doc,\r\n    addDoc,\r\n    updateDoc,\r\n    deleteDoc,\r\n    getDoc,\r\n    getDocs,\r\n    query,\r\n    where,\r\n    orderBy,\r\n    limit,\r\n    onSnapshot,\r\n    serverTimestamp,\r\n    Timestamp,\r\n} from \"firebase/firestore\";\nimport { db, isMockMode } from \"@/firebase/firebaseConfig\";\nimport { Order, OrderStatus, UserRole } from \"../schema\";\nimport { createNotification } from \"./notificationService\";\n\r\n/**\r\n * Create a new order\r\n */\r\nexport async function createOrder(orderData: Omit<Order, \"id\" | \"createdAt\" | \"updatedAt\">): Promise<string> {\r\n    try {\r\n        const docRef = await addDoc(collection(db, \"orders\"), {\r\n            ...orderData,\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n        });\r\n        return docRef.id;\r\n    } catch (error: any) {\r\n        console.error(\"Create order error:\", error);\r\n        throw new Error(error.message || \"Failed to create order\");\r\n    }\r\n}\r\n\r\n/**\r\n * Get a single order by ID\r\n */\r\nexport async function getOrder(orderId: string): Promise<Order | null> {\r\n    try {\r\n        const docSnap = await getDoc(doc(db, \"orders\", orderId));\r\n        if (!docSnap.exists()) {\r\n            return null;\r\n        }\r\n        return {\r\n            id: docSnap.id,\r\n            ...docSnap.data(),\r\n        } as Order;\r\n    } catch (error: any) {\r\n        console.error(\"Get order error:\", error);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Update an existing order\r\n */\r\nexport async function updateOrder(orderId: string, updates: Partial<Order>): Promise<void> {\r\n    try {\r\n        await updateDoc(doc(db, \"orders\", orderId), {\r\n            ...updates,\r\n            updatedAt: serverTimestamp(),\r\n        });\r\n    } catch (error: any) {\r\n        console.error(\"Update order error:\", error);\r\n        throw new Error(error.message || \"Failed to update order\");\r\n    }\r\n}\r\n\r\n/**\r\n * Delete an order\r\n */\r\nexport async function deleteOrder(orderId: string): Promise<void> {\r\n    try {\r\n        await deleteDoc(doc(db, \"orders\", orderId));\r\n    } catch (error: any) {\r\n        console.error(\"Delete order error:\", error);\r\n        throw new Error(error.message || \"Failed to delete order\");\r\n    }\r\n}\r\n\r\n/**\r\n * Get all orders\r\n */\r\nexport async function getAllOrders(): Promise<Order[]> {\r\n    try {\r\n        const q = query(collection(db, \"orders\"), orderBy(\"createdAt\", \"desc\"));\r\n        const querySnapshot = await getDocs(q);\r\n        return querySnapshot.docs.map((doc) => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n        })) as Order[];\r\n    } catch (error: any) {\r\n        console.error(\"Get all orders error:\", error);\r\n        return [];\r\n    }\r\n}\r\n\r\n/**\r\n * Get orders by status\r\n */\r\nexport async function getOrdersByStatus(status: OrderStatus): Promise<Order[]> {\r\n    try {\r\n        const q = query(\r\n            collection(db, \"orders\"),\r\n            where(\"status\", \"==\", status),\r\n            orderBy(\"createdAt\", \"desc\")\r\n        );\r\n        const querySnapshot = await getDocs(q);\r\n        return querySnapshot.docs.map((doc) => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n        })) as Order[];\r\n    } catch (error: any) {\r\n        console.error(\"Get orders by status error:\", error);\r\n        return [];\r\n    }\r\n}\r\n\r\n/**\r\n * Get orders for a specific technician\r\n */\r\nexport async function getOrdersByTechnician(technicianId: string): Promise<Order[]> {\r\n    try {\r\n        const q = query(\r\n            collection(db, \"orders\"),\r\n            where(\"technicianId\", \"==\", technicianId),\r\n            orderBy(\"createdAt\", \"desc\")\r\n        );\r\n        const querySnapshot = await getDocs(q);\r\n        return querySnapshot.docs.map((doc) => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n        })) as Order[];\r\n    } catch (error: any) {\r\n        console.error(\"Get orders by technician error:\", error);\r\n        return [];\r\n    }\r\n}\r\n\r\n/**\r\n * Get orders for a specific customer\r\n */\r\nexport async function getOrdersByCustomer(customerId: string): Promise<Order[]> {\r\n    try {\r\n        const q = query(\r\n            collection(db, \"orders\"),\r\n            where(\"customerId\", \"==\", customerId),\r\n            orderBy(\"createdAt\", \"desc\")\r\n        );\r\n        const querySnapshot = await getDocs(q);\r\n        return querySnapshot.docs.map((doc) => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n        })) as Order[];\r\n    } catch (error: any) {\r\n        console.error(\"Get orders by customer error:\", error);\r\n        return [];\r\n    }\r\n}\r\n\r\n/**\r\n * Assign order to a technician\r\n */\r\nexport async function assignOrderToTechnician(\n    orderId: string,\n    technicianId: string,\n    technicianName: string\n): Promise<void> {\n    try {\n        await updateOrder(orderId, {\n            technicianId,\n            technicianName,\n            assignedTechnicianId: technicianId,\n            assignedTechnicianName: technicianName,\n            assignedAt: serverTimestamp() as any,\n            status: \"assigned\",\n            assignmentHistory: (undefined as any),\n        });\n    } catch (error: any) {\n        console.error(\"Assign order error:\", error);\n        throw new Error(error.message || \"Failed to assign order\");\n    }\n}\n\r\n/**\r\n * Update order status\r\n */\r\nexport async function updateOrderStatus(orderId: string, status: OrderStatus): Promise<void> {\n    try {\n        const updates: Partial<Order> = { status };\n\n        // If completing the order, add completed date\n        if (status === \"completed\") {\n            updates.completedDate = Timestamp.now() as any;\n        }\n\n        await updateOrder(orderId, updates);\n    } catch (error: any) {\n        console.error(\"Update order status error:\", error);\n        throw new Error(error.message || \"Failed to update order status\");\n    }\n}\n\n/**\n * Technician proposes pricing and duration\n */\nexport interface OrderProposalParams {\n    proposedPriceMin?: number | null;\n    proposedPriceMax?: number | null;\n    proposedBreakdown?: { labor?: number | null; parts?: number | null; inspection?: number | null } | null;\n    proposedDurationMinutes: number;\n    proposedArrivalETA?: string | null;\n    proposalNote?: string;\n    proposalMediaUrls?: string[];\n    proposedByTechnicianId: string;\n}\nexport async function proposeOrderPricing(orderId: string, params: OrderProposalParams): Promise<void> {\n    const totalFromBreakdown = params.proposedBreakdown\n        ? Number(params.proposedBreakdown.labor || 0) + Number(params.proposedBreakdown.parts || 0) + Number(params.proposedBreakdown.inspection || 0)\n        : null;\n    const totalFromRange = params.proposedPriceMax ?? params.proposedPriceMin ?? null;\n    const recommendedTotal = (totalFromBreakdown ?? totalFromRange) ?? null;\n    const ttlMs = 48 * 60 * 60 * 1000;\n    const expiresAt = Timestamp.fromDate(new Date(Date.now() + ttlMs)) as any;\n    const updates: Partial<Order> = {\n        proposedPrice: params.proposedPriceMax ?? params.proposedPriceMin ?? null,\n        proposedPriceMin: params.proposedPriceMin ?? null,\n        proposedPriceMax: params.proposedPriceMax ?? null,\n        proposedBreakdown: params.proposedBreakdown ?? null,\n        proposedDurationMinutes: params.proposedDurationMinutes,\n        proposedArrivalETA: params.proposedArrivalETA ?? null,\n        proposalNote: params.proposalNote || null,\n        proposalMediaUrls: params.proposalMediaUrls || null,\n        proposedByTechnicianId: params.proposedByTechnicianId,\n        proposedAt: serverTimestamp() as any,\n        proposedExpiresAt: expiresAt,\n        pricingStatus: \"proposed\",\n    };\n    await updateOrder(orderId, updates);\n    try {\n        const baseMessage = `Technician proposed pricing for order ${orderId}` + (recommendedTotal != null ? ` ‚Ä¢ AED ${recommendedTotal}` : \"\");\n        await createNotification({\n            type: \"system\",\n            title: \"Pricing Proposed\",\n            message: baseMessage,\n            role: \"admin\",\n            orderId,\n            link: `/admin/orders`\n        });\n        if (recommendedTotal != null && recommendedTotal > 500) {\n            await createNotification({\n                type: \"system\",\n                title: \"High-Value Proposal\",\n                message: `Order ${orderId} requires Super Admin review ‚Ä¢ AED ${recommendedTotal}`,\n                role: \"super_admin\",\n                orderId,\n                link: `/admin/orders`\n            });\n        } else if (recommendedTotal != null && recommendedTotal < 200) {\n            await createNotification({\n                type: \"system\",\n                title: \"Auto-Approval Candidate\",\n                message: `Order ${orderId} proposed under AED 200 ‚Ä¢ Consider auto-approve`,\n                role: \"admin\",\n                orderId,\n                link: `/admin/orders`\n            });\n        }\n    } catch (_e) { void _e }\n}\n\n/**\n * Super Admin approves pricing\n */\nexport async function approveOrderPricing(orderId: string, adminUid: string): Promise<void> {\n    const snap = await getDoc(doc(db, \"orders\", orderId));\n    if (!snap.exists()) return;\n    const data = snap.data() as any;\n    const updates: Partial<Order> = {\n        approvedPrice: (data.proposedBreakdown\n            ? Number(data.proposedBreakdown.labor || 0) + Number(data.proposedBreakdown.parts || 0) + Number(data.proposedBreakdown.inspection || 0)\n            : (data.proposedPriceMax ?? data.proposedPrice ?? null)),\n        approvedDurationMinutes: data.proposedDurationMinutes ?? null,\n        approvedArrivalETA: data.proposedArrivalETA ?? null,\n        approvedByAdminId: adminUid,\n        approvedAt: serverTimestamp() as any,\n        pricingStatus: \"approved\",\n    };\n    await updateOrder(orderId, updates);\n    try {\n        await createNotification({\n            type: \"system\",\n            title: \"Pricing Approved\",\n            message: `Pricing approved for order ${orderId}`,\n            role: \"technician\",\n            orderId,\n            link: `/technician/orders`\n        });\n    } catch (_e) { void _e }\n}\n\n/**\n * Super Admin rejects pricing\n */\nexport async function rejectOrderPricing(orderId: string): Promise<void> {\n    const updates: Partial<Order> = {\n        pricingStatus: \"rejected\",\n    };\n    await updateOrder(orderId, updates);\n    try {\n        await createNotification({\n            type: \"system\",\n            title: \"Pricing Rejected\",\n            message: `Pricing rejected for order ${orderId}`,\n            role: \"technician\",\n            orderId,\n            link: `/technician/orders`\n        });\n    } catch (_e) { void _e }\n}\n\n/**\n * Super Admin counter-offer\n */\nexport async function counterOfferPricing(orderId: string, adminUid: string, params: {\n    counterPrice?: number | null;\n    counterDurationMinutes?: number | null;\n    counterArrivalETA?: string | null;\n    counterNote?: string | null;\n}): Promise<void> {\n    const updates: Partial<Order> = {\n        counterPrice: params.counterPrice ?? null,\n        counterDurationMinutes: params.counterDurationMinutes ?? null,\n        counterArrivalETA: params.counterArrivalETA ?? null,\n        approvedByAdminId: adminUid,\n        counterByAdminId: adminUid,\n        counterAt: serverTimestamp() as any,\n        pricingStatus: \"countered\",\n        proposalNote: params.counterNote ?? null,\n    };\n    await updateOrder(orderId, updates);\n    try {\n        await createNotification({\n            type: \"system\",\n            title: \"Counter Offer\",\n            message: `Counter offer posted for order ${orderId}`,\n            role: \"technician\",\n            orderId,\n            link: `/technician/orders`\n        });\n    } catch (_e) { void _e }\n}\n\n/**\n * Technician accepts assignment\n */\nexport async function acceptAssignedOrder(orderId: string, technicianUid: string): Promise<void> {\n    const ref = doc(db, \"orders\", orderId);\n    const snap = await getDoc(ref);\n    if (!snap.exists()) throw new Error(\"Order not found\");\n    const data = snap.data() as any;\n    if ((data.status !== \"assigned\") || (data.technicianId && data.technicianId !== technicianUid)) {\n        throw new Error(\"Not allowed to accept\");\n    }\n    await updateOrder(orderId, {\n        status: \"accepted\",\n    });\n}\n\n/**\n * Technician re-accepts counter-offer\n */\nexport async function reAcceptCounterOffer(orderId: string, technicianUid: string): Promise<void> {\n    const ref = doc(db, \"orders\", orderId);\n    const snap = await getDoc(ref);\n    if (!snap.exists()) throw new Error(\"Order not found\");\n    const data = snap.data() as any;\n    if ((data.pricingStatus !== \"countered\") || (data.technicianId && data.technicianId !== technicianUid)) {\n        throw new Error(\"Not allowed to re-accept\");\n    }\n    await updateOrder(orderId, {\n        pricingStatus: \"re_accepted\",\n    });\n    try {\n        await createNotification({\n            type: \"system\",\n            title: \"Counter Offer Accepted\",\n            message: `Technician accepted counter offer for order ${orderId}`,\n            role: \"admin\",\n            orderId,\n            link: `/admin/orders`\n        });\n    } catch (_e) { void _e }\n}\n\n/**\n * Start work (requires approved pricing)\n */\nexport async function startWork(orderId: string, technicianUid: string): Promise<void> {\n    const ref = doc(db, \"orders\", orderId);\n    const snap = await getDoc(ref);\n    if (!snap.exists()) throw new Error(\"Order not found\");\n    const data = snap.data() as any;\n    if ((data.pricingStatus !== \"approved\") || (data.technicianId && data.technicianId !== technicianUid)) {\n        throw new Error(\"Cannot start work\");\n    }\n    await updateOrder(orderId, {\n        status: \"in_progress\",\n    });\n}\n/**\r\n * Subscribe to all orders in real-time\r\n */\r\nexport function subscribeToOrders(callback: (orders: Order[]) => void): () => void {\n    if (typeof window !== \"undefined\" && isMockMode) {\n        callback([]);\n        return () => undefined;\n    }\n    const q = query(collection(db, \"orders\"), orderBy(\"createdAt\", \"desc\"));\n\n    return onSnapshot(q, (snapshot) => {\n        const orders = snapshot.docs.map((doc) => ({\n            id: doc.id,\n            ...doc.data(),\n        })) as Order[];\n        callback(orders);\n    });\n}\n\r\n/**\r\n * Subscribe to orders by technician in real-time\r\n */\r\nexport function subscribeToTechnicianOrders(\n    technicianId: string,\n    callback: (orders: Order[]) => void\n): () => void {\n    if (typeof window !== \"undefined\" && isMockMode) {\n        callback([]);\n        return () => undefined;\n    }\n    const q = query(\n        collection(db, \"orders\"),\n        where(\"technicianId\", \"==\", technicianId),\n        orderBy(\"createdAt\", \"desc\")\n    );\n\n    return onSnapshot(q, (snapshot) => {\n        const orders = snapshot.docs.map((doc) => ({\n            id: doc.id,\n            ...doc.data(),\n        })) as Order[];\n        callback(orders);\n    });\n}\n\r\n/**\r\n * Subscribe to orders by customer in real-time\r\n */\r\nexport function subscribeToCustomerOrders(\n    customerId: string,\n    callback: (orders: Order[]) => void\n): () => void {\n    if (typeof window !== \"undefined\" && isMockMode) {\n        callback([]);\n        return () => undefined;\n    }\n    const q = query(\n        collection(db, \"orders\"),\n        where(\"customerId\", \"==\", customerId),\n        orderBy(\"createdAt\", \"desc\")\n    );\n\n    return onSnapshot(q, (snapshot) => {\n        const orders = snapshot.docs.map((doc) => ({\n            id: doc.id,\n            ...doc.data(),\n        })) as Order[];\n        callback(orders);\n    });\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2153, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/7mood/Desktop/test%207.5/main/lib/firestore/services/authService.ts"],"sourcesContent":["import {\n    createUserWithEmailAndPassword,\n    signInWithEmailAndPassword,\n    signOut as firebaseSignOut,\n    sendPasswordResetEmail,\n    User as FirebaseUser,\n    updateProfile,\n    reauthenticateWithCredential,\n    EmailAuthProvider,\n    updatePassword\n} from \"firebase/auth\";\nimport { doc, setDoc, getDoc, serverTimestamp } from \"firebase/firestore\";\nimport { auth, db } from \"@/firebase/firebaseConfig\";\nimport { User, UserRole } from \"../schema\";\nimport { logAction, AuditActions } from \"@/lib/auditService\";\n\r\nexport interface SignUpData {\r\n    email: string;\r\n    password: string;\r\n    name: string;\r\n    role: UserRole;\r\n    phone?: string;\r\n    address?: string;\r\n}\r\n\r\nexport interface SignInData {\r\n    email: string;\r\n    password: string;\r\n}\r\n\r\n/**\r\n * Sign up a new user with email/password and create their profile in Firestore\r\n */\r\nexport async function signUp(data: SignUpData): Promise<User> {\r\n    try {\r\n        // Create Firebase Auth user\r\n        const userCredential = await createUserWithEmailAndPassword(\r\n            auth,\r\n            data.email,\r\n            data.password\r\n        );\r\n\r\n        const firebaseUser = userCredential.user;\r\n\r\n        // Update display name in Auth\r\n        await updateProfile(firebaseUser, {\r\n            displayName: data.name\r\n        });\r\n\r\n        // Create user document in Firestore\r\n        const userDoc: Omit<User, \"uid\"> = {\r\n            email: data.email,\r\n            name: data.name,\r\n            role: data.role,\r\n            phone: data.phone,\r\n            address: data.address,\r\n            createdAt: serverTimestamp() as any,\r\n            updatedAt: serverTimestamp() as any,\r\n        };\r\n\r\n        await setDoc(doc(db, \"users\", firebaseUser.uid), userDoc);\r\n\r\n        // Return complete user object\r\n        return {\r\n            uid: firebaseUser.uid,\r\n            ...userDoc,\r\n        };\r\n    } catch (error: any) {\r\n        console.error(\"Sign up error:\", error);\r\n        throw new Error(error.message || \"Failed to sign up\");\r\n    }\r\n}\r\n\r\n/**\r\n * Sign in with email and password\r\n */\r\nexport async function signIn(data: SignInData): Promise<FirebaseUser> {\r\n    try {\r\n        const userCredential = await signInWithEmailAndPassword(\r\n            auth,\r\n            data.email,\r\n            data.password\r\n        );\r\n        return userCredential.user;\r\n    } catch (error: any) {\r\n        console.error(\"Sign in error:\", error);\r\n        throw new Error(error.message || \"Failed to sign in\");\r\n    }\r\n}\r\n\r\n/**\r\n * Sign out the current user\r\n */\r\nexport async function signOut(): Promise<void> {\r\n    try {\r\n        await firebaseSignOut(auth);\r\n    } catch (error: any) {\r\n        console.error(\"Sign out error:\", error);\r\n        throw new Error(error.message || \"Failed to sign out\");\r\n    }\r\n}\r\n\r\n/**\r\n * Send password reset email\r\n */\r\nexport async function resetPassword(email: string): Promise<void> {\r\n    try {\r\n        await sendPasswordResetEmail(auth, email);\r\n    } catch (error: any) {\r\n        console.error(\"Password reset error:\", error);\r\n        throw new Error(error.message || \"Failed to send password reset email\");\r\n    }\r\n}\r\n\r\n/**\r\n * Get user data from Firestore\r\n */\r\nexport async function getUserData(uid: string): Promise<User | null> {\r\n    try {\r\n        const userDoc = await getDoc(doc(db, \"users\", uid));\r\n        if (!userDoc.exists()) {\r\n            return null;\r\n        }\r\n        return {\r\n            uid: userDoc.id,\r\n            ...userDoc.data(),\r\n        } as User;\r\n    } catch (error: any) {\r\n        console.error(\"Get user data error:\", error);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Get the role of the current user\r\n */\r\nexport async function getUserRole(uid: string): Promise<UserRole | null> {\r\n    const userData = await getUserData(uid);\r\n    return userData?.role || null;\r\n}\r\n\r\n/**\r\n * Check if current user has a specific role\r\n */\r\nexport async function hasRole(uid: string, role: UserRole): Promise<boolean> {\r\n    const userRole = await getUserRole(uid);\r\n    return userRole === role;\r\n}\r\n\r\n/**\r\n * Check if current user is admin\r\n */\r\nexport async function isAdmin(uid: string): Promise<boolean> {\r\n    return hasRole(uid, \"admin\");\r\n}\r\n\r\n/**\r\n * Check if current user is technician\r\n */\r\nexport async function isTechnician(uid: string): Promise<boolean> {\r\n    return hasRole(uid, \"technician\");\r\n}\r\n\r\n/**\r\n * Check if current user is customer\r\n */\r\nexport async function isCustomer(uid: string): Promise<boolean> {\n    return hasRole(uid, \"customer\");\n}\n\nexport async function changePassword(currentPassword: string, newPassword: string): Promise<void> {\n    const user = auth.currentUser;\n    if (!user || !user.email) {\n        throw new Error(\"Not authenticated\");\n    }\n    const credential = EmailAuthProvider.credential(user.email, currentPassword);\n    await reauthenticateWithCredential(user, credential);\n    await updatePassword(user, newPassword);\n    await logAction(AuditActions.PASSWORD_CHANGED, \"auth\", user.uid, user.email || \"\");\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2288, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/7mood/Desktop/test%207.5/main/app/admin/orders/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow\n} from \"@/components/ui/table\"\nimport { Input } from \"@/components/ui/input\"\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue\n} from \"@/components/ui/select\"\nimport { Button } from \"@/components/ui/button\"\nimport { Badge } from \"@/components/ui/badge\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter\n} from \"@/components/ui/dialog\"\nimport {\n  Search,\n  MoreHorizontal,\n  User,\n  Clock,\n  Trash2,\n  Eye,\n  CheckCircle,\n  AlertTriangle,\n  FileDown,\n  Plus,\n  MessageCircle\n} from \"lucide-react\"\nimport { openWhatsApp, WhatsAppTemplates, formatPhoneForWhatsApp } from \"@/lib/smsService\"\nimport { logAction, AuditActions } from \"@/lib/auditService\"\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger\n} from \"@/components/ui/dropdown-menu\"\nimport { collection, onSnapshot, doc, updateDoc, deleteDoc, orderBy, query, Timestamp, arrayUnion, runTransaction } from \"firebase/firestore\"\nimport { db, auth, isMockMode } from \"@/firebase/firebaseConfig\"\nimport { onAuthStateChanged } from \"firebase/auth\"\nimport { formatDistanceToNow } from \"date-fns\"\nimport { cn } from \"@/lib/utils\"\nimport { useT } from \"@/components/language-provider\"\nimport { FinalInvoice } from \"@/components/ui/invoice\"\nimport { toast } from \"@/hooks/use-toast\"\nimport { approveOrderPricing, rejectOrderPricing } from \"@/lib/firestore/services/orderService\"\nimport { counterOfferPricing } from \"@/lib/firestore/services/orderService\"\nimport { getUserRole } from \"@/lib/firestore/services/authService\"\n\ntype Order = {\n  id: string\n  orderId: string\n  customerName: string\n  customerPhone: string\n  deviceType: string\n  brand: string\n  model: string\n  issue: string\n  status: \"pending\" | \"in_progress\" | \"waiting_parts\" | \"completed\" | \"delivered\" | \"cancelled\"\n  technicianId?: string\n  technicianName?: string\n  createdAt: any\n  estimatedCompletion?: any\n  price?: number\n  notes?: string\n  statusHistory?: {\n    status: string\n    timestamp: any\n    note?: string\n  }[]\n}\n\ntype Technician = {\n  id: string\n  name: string\n  status: \"active\" | \"inactive\" | \"busy\"\n}\n\nconst statusColors = {\n  pending: \"bg-yellow-500/20 text-yellow-500 border-yellow-500/50\",\n  in_progress: \"bg-blue-500/20 text-blue-500 border-blue-500/50\",\n  waiting_parts: \"bg-orange-500/20 text-orange-500 border-orange-500/50\",\n  completed: \"bg-green-500/20 text-green-500 border-green-500/50\",\n  delivered: \"bg-purple-500/20 text-purple-500 border-purple-500/50\",\n  cancelled: \"bg-red-500/20 text-red-500 border-red-500/50\",\n}\n\nexport default function AdminOrdersPage() {\n  const t = useT()\n  const [authorized, setAuthorized] = useState(false)\n  const [orders, setOrders] = useState<Order[]>([])\n  const [technicians, setTechnicians] = useState<Technician[]>([])\n  const [search, setSearch] = useState(\"\")\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\")\n  const [loading, setLoading] = useState(true)\n  const [selectedOrder, setSelectedOrder] = useState<Order | null>(null)\n  const [isDetailsOpen, setIsDetailsOpen] = useState(false)\n  const [etaMinutes, setEtaMinutes] = useState<string>(\"\")\n  const [invoiceDialogOpen, setInvoiceDialogOpen] = useState(false)\n  const [invoiceNumber, setInvoiceNumber] = useState<string>(\"\")\n  const [invoiceLang, setInvoiceLang] = useState<\"en\" | \"ar\" | \"both\">(\"en\")\n  const [invoiceDiscount, setInvoiceDiscount] = useState<string>(\"0\")\n  const [vatEnabled, setVatEnabled] = useState<boolean>(false)\n  const [vatRate, setVatRate] = useState<string>(\"0\")\n  const [warrantyPeriod, setWarrantyPeriod] = useState<string>(\"3 months\")\n  const [adminNotesInvoice, setAdminNotesInvoice] = useState<string>(\"\")\n  const [disclaimerText, setDisclaimerText] = useState<string>(\"Payment due upon completion of repair.\")\n  const [invoiceFinalized, setInvoiceFinalized] = useState<boolean>(false)\n  const [overrideReason, setOverrideReason] = useState<string>(\"\")\n  const [currentUserRole, setCurrentUserRole] = useState<\"admin\" | \"technician\" | \"customer\" | \"super_admin\" | null>(null)\n  const [counterDialogOpen, setCounterDialogOpen] = useState(false)\n  const [counterPrice, setCounterPrice] = useState<string>(\"\")\n  const [counterDuration, setCounterDuration] = useState<string>(\"\")\n  const [counterETA, setCounterETA] = useState<string>(\"\")\n  const [counterNote, setCounterNote] = useState<string>(\"\")\n\n  const [itemsPerPage] = useState(10)\n  const [currentPage, setCurrentPage] = useState(1)\n\n  useEffect(() => {\n    // Auth guard - Firebase mode\n    const unsub = onAuthStateChanged(auth, (user) => {\n      if (!user) {\n        if (typeof window !== \"undefined\") {\n          window.location.replace(\"/admin/login\")\n        }\n      } else {\n        setAuthorized(true)\n        getUserRole(user.uid).then(setCurrentUserRole)\n      }\n    })\n\n    if (isMockMode) {\n      setOrders([])\n      setTechnicians([])\n      setLoading(false)\n      return () => {\n        unsub()\n      }\n    }\n\n    const q = query(collection(db, \"orders\"), orderBy(\"createdAt\", \"desc\"))\n    const unsubOrders = onSnapshot(q, (snap) => {\n      const mappedOrders = snap.docs.map(d => {\n        const data = d.data()\n        return {\n          id: d.id,\n          orderId: data.orderId || d.id,\n          customerName: data.customerName || data.name || \"Unknown\",\n          customerPhone: data.customerPhone || data.phone || \"\",\n          deviceType: data.deviceType || \"Device\",\n          brand: data.brand || \"\",\n          model: data.model || \"\",\n          issue: data.issue || data.issueType || \"\",\n          status: normalizeStatus(data.status),\n          technicianId: data.technicianId,\n          technicianName: data.technicianName || data.technician,\n          createdAt: data.createdAt,\n          estimatedCompletion: data.estimatedCompletion,\n          price: data.price,\n          notes: data.notes,\n          statusHistory: data.statusHistory\n        } as Order\n      })\n      setOrders(mappedOrders)\n      setLoading(false)\n    }, (error) => {\n      toast({ title: t(\"Failed to load orders\"), description: error?.message || t(\"Please try again\") })\n      setLoading(false)\n    })\n\n    const unsubTechs = onSnapshot(collection(db, \"technicians\"), (snap) => {\n      setTechnicians(snap.docs.map(d => ({ id: d.id, ...d.data() } as Technician)))\n    }, (error) => {\n      toast({ title: t(\"Failed to load technicians\"), description: error?.message || t(\"Please try again\") })\n    })\n\n    return () => {\n      unsub()\n      unsubOrders()\n      unsubTechs()\n    }\n  }, [])\n\n  // Helper to normalize status strings\n  const normalizeStatus = (status: string): Order[\"status\"] => {\n    if (!status) return \"pending\"\n    const s = status.toLowerCase().replace(/\\s+/g, \"_\")\n    if (s === \"order_created\" || s === \"pending\") return \"pending\"\n    if (s === \"in_progress\") return \"in_progress\"\n    if (s === \"waiting_parts\") return \"waiting_parts\"\n    if (s === \"completed\") return \"completed\"\n    if (s === \"delivered\") return \"delivered\"\n    if (s === \"cancelled\") return \"cancelled\"\n    return \"pending\"\n  }\n\n  const getInvoiceItemsForOrder = (o: Order) => {\n    const items: any[] = []\n    const base = Number(o.price || 0)\n    if (base > 0) {\n      items.push({ description: o.issue || \"Repair Service\", category: \"service\", quantity: 1, unitPrice: base, total: base })\n    }\n    const extras = (o as any).invoiceItems || []\n    return [...items, ...extras]\n  }\n\n  const getNextInvoiceNumber = async (): Promise<string> => {\n    const ref = doc(db, \"counters\", \"invoices\")\n    return await runTransaction(db, async (tx) => {\n      const snap = await tx.get(ref)\n      let current = snap.exists() ? Number((snap.data() as any).current || 0) : 0\n      current += 1\n      tx.set(ref, { current }, { merge: true })\n      return `INV-${String(current).padStart(6, \"0\")}`\n    })\n  }\n\n  const openInvoicePreview = async () => {\n    if (!selectedOrder) return\n    if (!invoiceNumber) {\n      const num = await getNextInvoiceNumber()\n      setInvoiceNumber(num)\n    }\n    setInvoiceDialogOpen(true)\n  }\n\n  const finalizeInvoice = async () => {\n    if (!selectedOrder) return\n    const discount = Number(invoiceDiscount || 0)\n    const vatR = Number(vatRate || 0)\n    const items = getInvoiceItemsForOrder(selectedOrder)\n    const subtotal = items.reduce((s, i: any) => s + Number(i.total || i.unitPrice * i.quantity), 0)\n    const afterDiscount = subtotal - discount\n    const vatAmount = vatEnabled ? afterDiscount * vatR : 0\n    const total = afterDiscount + vatAmount\n\n    const ref = doc(db, \"orders\", selectedOrder.id)\n    await updateDoc(ref, {\n      invoice: {\n        invoiceNumber,\n        invoiceDate: Timestamp.now(),\n        status: \"finalized\",\n        generatedBy: \"admin\",\n        discount,\n        vatRate: vatR,\n        vatEnabled,\n        warrantyPeriod,\n        adminNotes: adminNotesInvoice,\n        disclaimerText,\n        subtotal,\n        total,\n        language: invoiceLang,\n        history: arrayUnion({ action: \"finalized\", by: \"admin\", at: Timestamp.now() })\n      },\n      updatedAt: Timestamp.now()\n    })\n    setInvoiceFinalized(true)\n  }\n\n  const overrideInvoice = async () => {\n    if (!selectedOrder || !overrideReason) return\n    const ref = doc(db, \"orders\", selectedOrder.id)\n    await updateDoc(ref, {\n      invoice: {\n        ...(selectedOrder as any).invoice,\n        history: arrayUnion({ action: \"override\", by: \"admin\", at: Timestamp.now(), note: overrideReason })\n      },\n      updatedAt: Timestamp.now()\n    })\n    setOverrideReason(\"\")\n  }\n\n  if (!authorized) return null as any\n  const filteredOrders = orders.filter(order => {\n    const matchesSearch =\n      order.customerName.toLowerCase().includes(search.toLowerCase()) ||\n      order.orderId.toLowerCase().includes(search.toLowerCase()) ||\n      order.customerPhone.includes(search)\n\n    const matchesStatus = statusFilter === \"all\" || order.status === statusFilter\n\n    return matchesSearch && matchesStatus\n  })\n\n  const handleStatusUpdate = async (orderId: string, newStatus: string) => {\n    const order = orders.find(o => o.id === orderId)\n\n    const historyItem = {\n      status: newStatus,\n      timestamp: Timestamp.now(),\n      note: `${t(\"Status updated to\")} ${newStatus === \"in_progress\" ? t(\"In Progress\") :\n        newStatus === \"waiting_parts\" ? t(\"Waiting Parts\") :\n          newStatus === \"completed\" ? t(\"Completed\") :\n            newStatus === \"delivered\" ? t(\"Delivered\") :\n              newStatus === \"cancelled\" ? t(\"Cancelled\") :\n                t(\"Pending\")\n        }`\n    }\n\n    try {\n      await updateDoc(doc(db, \"orders\", orderId), {\n        status: newStatus,\n        statusHistory: arrayUnion(historyItem)\n      })\n      toast({ title: t(\"Status updated\"), description: `${t(\"Order\")} ${order?.orderId} ${t(\"now\")} ${statusLabel(newStatus as any)}` })\n    } catch (e: any) {\n      toast({ title: t(\"Failed to update status\"), description: e?.message || t(\"Please try again\") })\n      return\n    }\n\n    // Auto send WhatsApp notification\n    if (order?.customerPhone) {\n      let message = \"\"\n      switch (newStatus) {\n        case \"in_progress\":\n          message = WhatsAppTemplates.technicianAssigned(order.orderId, order.technicianName || \"Technician\", \"\")\n          break\n        case \"completed\":\n          message = WhatsAppTemplates.repairComplete(order.orderId, `kbi.ae/rate/${order.orderId}`)\n          break\n      }\n      if (message) {\n        openWhatsApp(order.customerPhone, message)\n        toast({ title: t(\"WhatsApp opened\"), description: t(\"Customer notified\") })\n      }\n    }\n\n    // Audit log\n    const user = auth.currentUser\n    if (user) {\n      logAction(AuditActions.ORDER_UPDATED, \"order\", user.uid, user.email || \"\", {\n        targetId: orderId,\n        targetType: \"order\",\n        details: { newStatus }\n      })\n    }\n  }\n\n  const handleAssignTech = async (orderId: string, techId: string) => {\n    const tech = technicians.find(t => t.id === techId)\n    if (!tech) return\n\n    const order = orders.find(o => o.id === orderId)\n\n    const historyItem = {\n      status: \"in_progress\",\n      timestamp: Timestamp.now(),\n      note: `${t(\"Assigned to technician\")} ${tech.name}`\n    }\n\n    try {\n      await updateDoc(doc(db, \"orders\", orderId), {\n        technicianId: techId,\n        technicianName: tech.name,\n        status: \"in_progress\",\n        statusHistory: arrayUnion(historyItem)\n      })\n      toast({ title: t(\"Technician assigned\"), description: `${tech.name} ‚Ä¢ ${t(\"Order\")} ${order?.orderId}` })\n    } catch (e: any) {\n      toast({ title: t(\"Failed to assign\"), description: e?.message || t(\"Please try again\") })\n      return\n    }\n\n    // Auto send WhatsApp notification for technician assignment\n    if (order?.customerPhone) {\n      const message = WhatsAppTemplates.technicianAssigned(order.orderId, tech.name, \"\")\n      openWhatsApp(order.customerPhone, message)\n      toast({ title: t(\"WhatsApp opened\"), description: t(\"Customer notified\") })\n    }\n\n    // Audit log\n    const user = auth.currentUser\n    if (user) {\n      logAction(AuditActions.ORDER_UPDATED, \"order\", user.uid, user.email || \"\", {\n        targetId: orderId,\n        targetType: \"order\",\n        details: { assignedTo: tech.name }\n      })\n    }\n  }\n\n  const handleDelete = async (orderId: string) => {\n    if (confirm(t(\"Are you sure you want to delete this order?\"))) {\n      try {\n        await deleteDoc(doc(db, \"orders\", orderId))\n        toast({ title: t(\"Order deleted\"), description: orderId })\n        const user = auth.currentUser\n        if (user) {\n          logAction(AuditActions.ORDER_DELETED, \"order\", user.uid, user.email || \"\", {\n            targetId: orderId,\n            targetType: \"order\"\n          })\n        }\n      } catch (e: any) {\n        toast({ title: t(\"Delete failed\"), description: e?.message || t(\"Please try again\") })\n      }\n    }\n  }\n\n  const handleWhatsAppNotify = (order: Order, messageType: string) => {\n    if (!order.customerPhone) {\n      toast({ title: t(\"No phone number available\"), description: t(\"Add customer phone to order\") })\n      return\n    }\n    let message = \"\"\n    switch (messageType) {\n      case \"confirmation\":\n        message = WhatsAppTemplates.orderConfirmation(order.orderId, order.customerName)\n        break\n      case \"assigned\":\n        message = WhatsAppTemplates.technicianAssigned(order.orderId, order.technicianName || \"Technician\", \"\")\n        break\n      case \"complete\":\n        message = WhatsAppTemplates.repairComplete(order.orderId, `kbi.ae/rate/${order.orderId}`)\n        break\n      default:\n        message = `Order #${order.orderId} update`\n    }\n    openWhatsApp(order.customerPhone, message)\n    toast({ title: t(\"WhatsApp opened\"), description: t(\"Customer notified\") })\n  }\n\n  const handleEtaUpdate = async () => {\n    if (!selectedOrder || !etaMinutes) return\n    const minutes = parseInt(etaMinutes, 10)\n    if (isNaN(minutes) || minutes < 0) return\n    const iso = new Date(Date.now() + minutes * 60000).toISOString()\n\n    await updateDoc(doc(db, \"orders\", selectedOrder.id), { estimatedCompletion: iso, updatedAt: Timestamp.now() })\n    setEtaMinutes(\"\")\n  }\n\n  const totalPages = Math.ceil(filteredOrders.length / itemsPerPage)\n  const paginatedOrders = filteredOrders.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage)\n\n  const statusLabel = (s: Order[\"status\"]) => (\n    s === \"in_progress\" ? t(\"In Progress\") :\n      s === \"waiting_parts\" ? t(\"Waiting Parts\") :\n        s === \"completed\" ? t(\"Completed\") :\n          s === \"delivered\" ? t(\"Delivered\") :\n            s === \"cancelled\" ? t(\"Cancelled\") :\n              t(\"Pending\")\n  )\n\n  const exportCSV = () => {\n    const headers = [t(\"Order ID\"), t(\"Customer\"), t(\"Phone\"), t(\"Device\"), t(\"Issue\"), t(\"Status\"), t(\"Technician\"), t(\"Created\"), t(\"Price\")]\n    const rows = filteredOrders.map(o => [\n      o.orderId,\n      o.customerName,\n      o.customerPhone,\n      `\"${o.brand} ${o.model}\"`, // Quote to handle commas\n      `\"${o.issue}\"`,\n      o.status,\n      o.technicianName || t(\"Unassigned\"),\n      o.createdAt?.seconds ? new Date(o.createdAt.seconds * 1000).toISOString() : \"\",\n      o.price || \"\"\n    ])\n\n    const csvContent = \"data:text/csv;charset=utf-8,\"\n      + headers.join(\",\") + \"\\n\"\n      + rows.map(e => e.join(\",\")).join(\"\\n\")\n\n    const encodedUri = encodeURI(csvContent)\n    const link = document.createElement(\"a\")\n    link.setAttribute(\"href\", encodedUri)\n    link.setAttribute(\"download\", `orders_export_${new Date().toISOString().slice(0, 10)}.csv`)\n    document.body.appendChild(link)\n    link.click()\n    document.body.removeChild(link)\n  }\n  const handleApproveProposal = async (order: Order) => {\n    try {\n      if (isMockMode) {\n        setOrders(prev => prev.map(o => o.id === order.id ? ({\n          ...o,\n          ...(o as any),\n          approvedPrice: (o as any).proposedPrice ?? null,\n          approvedDurationMinutes: (o as any).proposedDurationMinutes ?? null,\n          approvedByAdminId: \"mock_admin\",\n          approvedAt: new Date().toISOString(),\n          pricingStatus: \"approved\",\n        }) : o))\n        toast({ title: t(\"Proposal approved\"), description: order.orderId })\n        return\n      }\n      const uid = auth.currentUser?.uid || \"\"\n      await approveOrderPricing(order.id, uid)\n      toast({ title: t(\"Proposal approved\"), description: order.orderId })\n    } catch (e: any) {\n      toast({ title: t(\"Failed to approve\"), description: e?.message || t(\"Please try again\") })\n    }\n  }\n  const handleRejectProposal = async (order: Order) => {\n    try {\n      if (isMockMode) {\n        setOrders(prev => prev.map(o => o.id === order.id ? ({\n          ...o,\n          ...(o as any),\n          pricingStatus: \"rejected\",\n        }) : o))\n        toast({ title: t(\"Proposal rejected\"), description: order.orderId })\n        return\n      }\n      await rejectOrderPricing(order.id)\n      toast({ title: t(\"Proposal rejected\"), description: order.orderId })\n    } catch (e: any) {\n      toast({ title: t(\"Failed to reject\"), description: e?.message || t(\"Please try again\") })\n    }\n  }\n  const handleCounterOffer = async (order: Order) => {\n    try {\n      if (currentUserRole !== \"super_admin\") {\n        toast({ title: t(\"Not allowed\"), description: t(\"Only Super Admin can counter\") })\n        return\n      }\n      if (isMockMode) {\n        setOrders(prev => prev.map(o => o.id === order.id ? ({\n          ...o,\n          ...(o as any),\n          counterPrice: parseFloat(counterPrice || \"0\") || null,\n          counterDurationMinutes: parseFloat(counterDuration || \"0\") || null,\n          counterArrivalETA: counterETA || null,\n          pricingStatus: \"countered\",\n        }) : o))\n        setCounterDialogOpen(false)\n        setCounterPrice(\"\"); setCounterDuration(\"\"); setCounterETA(\"\"); setCounterNote(\"\")\n        toast({ title: t(\"Counter saved\"), description: order.orderId })\n        return\n      }\n      const uid = auth.currentUser?.uid || \"\"\n      await counterOfferPricing(order.id, uid, {\n        counterPrice: parseFloat(counterPrice || \"0\") || null,\n        counterDurationMinutes: parseFloat(counterDuration || \"0\") || null,\n        counterArrivalETA: counterETA || null,\n        counterNote,\n      })\n      setCounterDialogOpen(false)\n      setCounterPrice(\"\"); setCounterDuration(\"\"); setCounterETA(\"\"); setCounterNote(\"\")\n      toast({ title: t(\"Counter saved\"), description: order.orderId })\n    } catch (e: any) {\n      toast({ title: t(\"Failed to counter\"), description: e?.message || t(\"Please try again\") })\n    }\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-3xl font-bold text-white\">{t(\"Orders Management\")}</h1>\n        <div className=\"flex gap-2\">\n          <Button variant=\"outline\" onClick={exportCSV}>\n            <FileDown className=\"mr-2 h-4 w-4\" /> {t(\"Export CSV\")}\n          </Button>\n          <Button>\n            <Plus className=\"mr-2 h-4 w-4\" /> {t(\"New Order\")}\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"flex items-center gap-4\">\n        <div className=\"relative flex-1 max-w-sm\">\n          <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-white/50\" />\n          <Input\n            placeholder={t(\"Search orders...\")}\n            className=\"pl-9 bg-white/5 border-white/10 text-white\"\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n          />\n        </div>\n        <Select value={statusFilter} onValueChange={setStatusFilter}>\n          <SelectTrigger className=\"w-[180px] bg-white/5 border-white/10 text-white hover:bg-white/10 focus-visible:border-cyan-500 focus-visible:ring-cyan-500/30 outline-none rounded-lg\">\n            <SelectValue placeholder={t(\"Filter by status\")} />\n          </SelectTrigger>\n          <SelectContent className=\"bg-zinc-900 border-white/10 text-white\">\n            <SelectItem value=\"all\">{t(\"All\")}</SelectItem>\n            <SelectItem value=\"pending\">{t(\"Pending\")}</SelectItem>\n            <SelectItem value=\"in_progress\">{t(\"In Progress\")}</SelectItem>\n            <SelectItem value=\"waiting_parts\">{t(\"Waiting Parts\")}</SelectItem>\n            <SelectItem value=\"completed\">{t(\"Completed\")}</SelectItem>\n            <SelectItem value=\"delivered\">{t(\"Delivered\")}</SelectItem>\n            <SelectItem value=\"cancelled\">{t(\"Cancelled\")}</SelectItem>\n          </SelectContent>\n        </Select>\n      </div>\n\n      <div className=\"rounded-md border border-white/10 bg-white/5 overflow-hidden\">\n        <Table>\n          <TableHeader className=\"bg-white/5\">\n            <TableRow className=\"border-white/10 hover:bg-white/5\">\n              <TableHead className=\"text-white\">{t(\"Order ID\")}</TableHead>\n              <TableHead className=\"text-white\">{t(\"Customer\")}</TableHead>\n              <TableHead className=\"text-white\">{t(\"Device\")}</TableHead>\n              <TableHead className=\"text-white\">{t(\"Issue\")}</TableHead>\n              <TableHead className=\"text-white\">{t(\"Status\")}</TableHead>\n              <TableHead className=\"text-white\">{t(\"Technician\")}</TableHead>\n              <TableHead className=\"text-white\">{t(\"Created\")}</TableHead>\n              <TableHead className=\"text-white text-right\">{t(\"Actions\")}</TableHead>\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {filteredOrders.length === 0 ? (\n              <TableRow>\n                <TableCell colSpan={8} className=\"text-center py-8 text-white/50\">\n                  {t(\"No orders found\")}\n                </TableCell>\n              </TableRow>\n            ) : (\n              paginatedOrders.map((order) => (\n                <TableRow key={order.id} className=\"border-white/10 hover:bg-white/5\">\n                  <TableCell className=\"font-medium text-white\">{order.orderId}</TableCell>\n                  <TableCell>\n                    <div className=\"flex flex-col\">\n                      <span className=\"text-white\">{order.customerName}</span>\n                      <span className=\"text-xs text-white/50\">{order.customerPhone}</span>\n                    </div>\n                  </TableCell>\n                  <TableCell className=\"text-white\">\n                    {order.brand} {order.model}\n                  </TableCell>\n                  <TableCell className=\"text-white\">{order.issue}</TableCell>\n                  <TableCell>\n                    <Badge variant=\"outline\" className={cn(\"capitalize\", statusColors[order.status as keyof typeof statusColors])}>\n                      {statusLabel(order.status)}\n                    </Badge>\n                  </TableCell>\n                  <TableCell className=\"text-white\">\n                    {order.technicianName ? (\n                      <div className=\"flex items-center gap-2\">\n                        <User className=\"h-3 w-3 text-cyan-400\" />\n                        <span>{order.technicianName}</span>\n                      </div>\n                    ) : (\n                      <span className=\"text-white/30 italic\">{t(\"Unassigned\")}</span>\n                    )}\n                  </TableCell>\n                  <TableCell className=\"text-white/60\">\n                    {order.createdAt?.seconds ? formatDistanceToNow(new Date(order.createdAt.seconds * 1000), { addSuffix: true }) : t(\"Just now\")}\n                  </TableCell>\n                  <TableCell className=\"text-right\">\n                    <DropdownMenu>\n                      <DropdownMenuTrigger asChild>\n                        <Button variant=\"ghost\" className=\"h-8 w-8 p-0 text-white/70 hover:text-white\">\n                          <span className=\"sr-only\">{t(\"Open menu\")}</span>\n                          <MoreHorizontal className=\"h-4 w-4\" />\n                        </Button>\n                      </DropdownMenuTrigger>\n                      <DropdownMenuContent align=\"end\" className=\"bg-zinc-900 border-zinc-800 text-white\">\n                        <DropdownMenuLabel>{t(\"Actions\")}</DropdownMenuLabel>\n                        <DropdownMenuItem onClick={() => { setSelectedOrder(order); setIsDetailsOpen(true) }}>\n                          <Eye className=\"mr-2 h-4 w-4\" /> {t(\"View Details\")}\n                        </DropdownMenuItem>\n                        <DropdownMenuSeparator className=\"bg-zinc-800\" />\n                        <DropdownMenuLabel>{t(\"Update Status\")}</DropdownMenuLabel>\n                        <DropdownMenuItem onClick={() => handleStatusUpdate(order.id, \"in_progress\")}>\n                          <Clock className=\"mr-2 h-4 w-4\" /> {t(\"In Progress\")}\n                        </DropdownMenuItem>\n                        <DropdownMenuItem onClick={() => handleStatusUpdate(order.id, \"completed\")}>\n                          <CheckCircle className=\"mr-2 h-4 w-4\" /> {t(\"Completed\")}\n                        </DropdownMenuItem>\n                        {((order as any).pricingStatus === \"proposed\" && currentUserRole === \"super_admin\") && (\n                          <>\n                            <DropdownMenuSeparator className=\"bg-zinc-800\" />\n                            <DropdownMenuLabel>{t(\"Pricing Proposal\")}</DropdownMenuLabel>\n                            <DropdownMenuItem onClick={() => handleApproveProposal(order)}>\n                              <CheckCircle className=\"mr-2 h-4 w-4\" /> {t(\"Approve Proposal\")}\n                            </DropdownMenuItem>\n                            <DropdownMenuItem onClick={() => handleRejectProposal(order)}>\n                              <AlertTriangle className=\"mr-2 h-4 w-4\" /> {t(\"Reject Proposal\")}\n                            </DropdownMenuItem>\n                            <DropdownMenuItem onClick={() => { setSelectedOrder(order); setCounterDialogOpen(true) }}>\n                              <AlertTriangle className=\"mr-2 h-4 w-4\" /> {t(\"Counter Offer\")}\n                            </DropdownMenuItem>\n                          </>\n                        )}\n                        <DropdownMenuSeparator className=\"bg-zinc-800\" />\n                        <DropdownMenuLabel>{t(\"Assign Technician\")}</DropdownMenuLabel>\n                        {technicians.map(tech => (\n                          <DropdownMenuItem key={tech.id} onClick={() => handleAssignTech(order.id, tech.id)}>\n                            <User className=\"mr-2 h-4 w-4\" /> {tech.name}\n                          </DropdownMenuItem>\n                        ))}\n                        <DropdownMenuSeparator className=\"bg-zinc-800\" />\n                        <DropdownMenuLabel>{t(\"Notify Customer\")}</DropdownMenuLabel>\n                        <DropdownMenuItem onClick={() => handleWhatsAppNotify(order, \"confirmation\")}>\n                          <MessageCircle className=\"mr-2 h-4 w-4\" /> {t(\"Order Received\")}\n                        </DropdownMenuItem>\n                        <DropdownMenuItem onClick={() => handleWhatsAppNotify(order, \"assigned\")}>\n                          <MessageCircle className=\"mr-2 h-4 w-4\" /> {t(\"Technician Assigned\")}\n                        </DropdownMenuItem>\n                        <DropdownMenuItem onClick={() => handleWhatsAppNotify(order, \"complete\")}>\n                          <MessageCircle className=\"mr-2 h-4 w-4\" /> {t(\"Repair Complete\")}\n                        </DropdownMenuItem>\n                        <DropdownMenuSeparator className=\"bg-zinc-800\" />\n                        <DropdownMenuItem className=\"text-red-500 hover:text-red-400\" onClick={() => handleDelete(order.id)}>\n                          <Trash2 className=\"mr-2 h-4 w-4\" /> {t(\"Delete Order\")}\n                        </DropdownMenuItem>\n                      </DropdownMenuContent>\n                    </DropdownMenu>\n                  </TableCell>\n                </TableRow>\n              ))\n            )}\n          </TableBody>\n        </Table>\n      </div>\n\n      {/* Pagination */}\n      {totalPages > 1 && (\n        <div className=\"flex items-center justify-end gap-2\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => setCurrentPage(p => Math.max(1, p - 1))}\n            disabled={currentPage === 1}\n            className=\"bg-white/5 border-white/10 hover:bg-white/10 text-white\"\n          >\n            {t(\"Previous\")}\n          </Button>\n          <span className=\"text-sm text-white/50\">\n            {t(\"Page\")} {currentPage} {t(\"of\")} {totalPages}\n          </span>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => setCurrentPage(p => Math.min(totalPages, p + 1))}\n            disabled={currentPage === totalPages}\n            className=\"bg-white/5 border-white/10 hover:bg-white/10 text-white\"\n          >\n            {t(\"Next\")}\n          </Button>\n        </div>\n      )}\n\n      {/* Order Details Modal */}\n      <Dialog open={isDetailsOpen} onOpenChange={setIsDetailsOpen}>\n        <DialogContent className=\"bg-zinc-950 border-zinc-800 text-white sm:max-w-[600px]\">\n          <DialogHeader>\n            <DialogTitle>{t(\"Order Details\")}: {selectedOrder?.orderId}</DialogTitle>\n          </DialogHeader>\n          {selectedOrder && (\n            <div className=\"grid gap-4 py-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <h4 className=\"text-sm font-medium text-white/50 mb-1\">{t(\"Customer\")}</h4>\n                  <p className=\"font-semibold\">{selectedOrder.customerName}</p>\n                  <p className=\"text-sm text-white/70\">{selectedOrder.customerPhone}</p>\n                </div>\n                <div>\n                  <h4 className=\"text-sm font-medium text-white/50 mb-1\">{t(\"Device\")}</h4>\n                  <p className=\"font-semibold\">{selectedOrder.brand} {selectedOrder.model}</p>\n                  <p className=\"text-sm text-white/70\">{selectedOrder.deviceType}</p>\n                </div>\n                <div>\n                  <h4 className=\"text-sm font-medium text-white/50 mb-1\">{t(\"Issue\")}</h4>\n                  <p className=\"font-semibold\">{selectedOrder.issue}</p>\n                </div>\n                  <div>\n                    <h4 className=\"text-sm font-medium text-white/50 mb-1\">{t(\"Status\")}</h4>\n                    <Badge variant=\"outline\" className={cn(\"capitalize\", statusColors[selectedOrder.status as keyof typeof statusColors])}>\n                      {selectedOrder.status.replace(\"_\", \" \")}\n                    </Badge>\n                  </div>\n                </div>\n\n                {((selectedOrder as any).pricingStatus) && (\n                  <div className=\"mt-4 grid grid-cols-2 gap-4 p-3 rounded border border-white/10 bg-white/5\">\n                    <div>\n                      <h4 className=\"text-sm font-medium text-white/50 mb-1\">{t(\"Pricing Status\")}</h4>\n                      <p className=\"font-semibold\">{(selectedOrder as any).pricingStatus}</p>\n                    </div>\n                    {(selectedOrder as any).proposedPrice && (\n                      <div>\n                        <h4 className=\"text-sm font-medium text-white/50 mb-1\">{t(\"Proposed Price\")}</h4>\n                        <p className=\"font-semibold\">AED {(selectedOrder as any).proposedPrice}</p>\n                      </div>\n                    )}\n                    {(selectedOrder as any).proposedPriceMin && (\n                      <div>\n                        <h4 className=\"text-sm font-medium text-white/50 mb-1\">{t(\"Proposed Range\")}</h4>\n                        <p className=\"font-semibold\">AED {(selectedOrder as any).proposedPriceMin} - {(selectedOrder as any).proposedPriceMax}</p>\n                      </div>\n                    )}\n                    {(selectedOrder as any).proposedBreakdown && (\n                      <div className=\"col-span-2\">\n                        <h4 className=\"text-sm font-medium text-white/50 mb-1\">{t(\"Breakdown\")}</h4>\n                        <div className=\"text-white/80 text-sm\">\n                          {t(\"Labor\")}: {((selectedOrder as any).proposedBreakdown.labor || 0)} ‚Ä¢ {t(\"Parts\")}: {((selectedOrder as any).proposedBreakdown.parts || 0)} ‚Ä¢ {t(\"Inspection\")}: {((selectedOrder as any).proposedBreakdown.inspection || 0)}\n                        </div>\n                      </div>\n                    )}\n                    {(selectedOrder as any).proposalMediaUrls?.length > 0 && (\n                      <div className=\"col-span-2 grid grid-cols-3 gap-2\">\n                        {((selectedOrder as any).proposalMediaUrls || []).map((u: string, i: number) => (\n                          <a key={i} href={u} target=\"_blank\" rel=\"noreferrer\" className=\"block aspect-square rounded border border-white/10 overflow-hidden\">\n                            <img src={u} alt=\"media\" className=\"w-full h-full object-cover\" />\n                          </a>\n                        ))}\n                      </div>\n                    )}\n                    {(selectedOrder as any).proposedDurationMinutes && (\n                      <div>\n                        <h4 className=\"text-sm font-medium text-white/50 mb-1\">{t(\"Proposed Duration\")}</h4>\n                        <p className=\"font-semibold\">{(selectedOrder as any).proposedDurationMinutes} {t(\"minutes\")}</p>\n                      </div>\n                    )}\n                    {((selectedOrder as any).proposedExpiresAt) && (\n                      <div>\n                        <h4 className=\"text-sm font-medium text-white/50 mb-1\">{t(\"Proposal Expires\")}</h4>\n                        <p className=\"font-semibold\">\n                          {(() => {\n                            const v = (selectedOrder as any).proposedExpiresAt\n                            const d = v?.toDate?.() ? v.toDate() : (typeof v === \"string\" ? new Date(v) : null)\n                            return d ? d.toLocaleString() : t(\"N/A\")\n                          })()}\n                        </p>\n                      </div>\n                    )}\n                    <div className=\"col-span-2\">\n                      <h4 className=\"text-sm font-medium text-white/50 mb-1\">{t(\"Approval Tier\")}</h4>\n                      <p className=\"font-semibold\">\n                        {(() => {\n                          const data: any = selectedOrder\n                          const total = data?.proposedBreakdown\n                            ? Number(data.proposedBreakdown.labor || 0) + Number(data.proposedBreakdown.parts || 0) + Number(data.proposedBreakdown.inspection || 0)\n                            : (data?.proposedPriceMax ?? data?.proposedPriceMin ?? data?.proposedPrice ?? null)\n                          if (total == null) return t(\"Unknown\")\n                          if (total < 200) return t(\"Auto-approve recommended (<200 AED)\")\n                          if (total <= 500) return t(\"Admin review (200‚Äì500 AED)\")\n                          return t(\"Super Admin review (>500 AED)\")\n                        })()}\n                      </p>\n                    </div>\n                    {(selectedOrder as any).proposalNote && (\n                      <div className=\"col-span-2\">\n                        <h4 className=\"text-sm font-medium text-white/50 mb-1\">{t(\"Technician Note\")}</h4>\n                        <p className=\"text-white/80\">{(selectedOrder as any).proposalNote}</p>\n                      </div>\n                    )}\n                    {((selectedOrder as any).pricingStatus === \"proposed\" && currentUserRole === \"super_admin\") && (\n                      <div className=\"col-span-2 flex gap-2\">\n                        <Button onClick={() => handleApproveProposal(selectedOrder)} className=\"bg-green-600 text-white\">{t(\"Approve Proposal\")}</Button>\n                        <Button variant=\"outline\" onClick={() => handleRejectProposal(selectedOrder)}>{t(\"Reject Proposal\")}</Button>\n                        <Button variant=\"outline\" onClick={() => setCounterDialogOpen(true)}>{t(\"Counter Offer\")}</Button>\n                      </div>\n                    )}\n                  </div>\n                )}\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <h4 className=\"text-sm font-medium text-white/50 mb-1\">{t(\"ETA (minutes)\")}</h4>\n                    <div className=\"flex gap-2\">\n                      <Input\n                      type=\"number\"\n                      value={etaMinutes}\n                      onChange={(e) => setEtaMinutes(e.target.value)}\n                      className=\"bg-white/5 border-white/10 text-white\"\n                    />\n                    <Button onClick={handleEtaUpdate} className=\"bg-cyan-500 hover:bg-cyan-400 text-black\">\n                      {t(\"Save\")}\n                    </Button>\n                  </div>\n                </div>\n                <div>\n                  {selectedOrder.estimatedCompletion && (\n                    <div className=\"p-3 rounded border flex items-center gap-3 transition-colors border-white/10 bg-white/5\">\n                      <Clock className=\"w-5 h-5 text-cyan-500\" />\n                      <div>\n                        <p className=\"text-xs text-white/60\">{t(\"Remaining Time\")}</p>\n                        <p className=\"text-sm font-mono text-white\">\n                          {new Date(selectedOrder.estimatedCompletion).toLocaleString()}\n                        </p>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Timeline */}\n              <div className=\"mt-6 pt-6 border-t border-white/10\">\n                <h4 className=\"text-sm font-medium text-white/50 mb-4\">{t(\"Order Timeline\")}</h4>\n                <div className=\"space-y-0 relative\">\n                  {/* Vertical Line */}\n                  <div className=\"absolute left-2.5 top-2 bottom-4 w-0.5 bg-zinc-800\" />\n\n                  {(() => {\n                    const steps = [\n                      { id: \"pending\", label: t(\"Order Placed\"), description: t(\"Order has been created\") },\n                      { id: \"in_progress\", label: t(\"In Repair\"), description: t(\"Technician is working on the device\") },\n                      { id: \"completed\", label: t(\"Repair Completed\"), description: t(\"Device is fixed and ready\") },\n                      { id: \"delivered\", label: t(\"Delivered\"), description: t(\"Device returned to customer\") }\n                    ]\n\n                    // Determine current step index\n                    let currentStepIndex = 0\n                    if (selectedOrder.status === \"delivered\") currentStepIndex = 3\n                    else if (selectedOrder.status === \"completed\") currentStepIndex = 2\n                    else if (selectedOrder.status === \"in_progress\" || selectedOrder.status === \"waiting_parts\") currentStepIndex = 1\n                    else currentStepIndex = 0\n\n                    if (selectedOrder.status === \"cancelled\") {\n                      return (\n                        <div className=\"relative flex gap-4 pb-6\">\n                          <div className=\"relative z-10 flex h-6 w-6 items-center justify-center rounded-full bg-red-500 ring-4 ring-zinc-950\">\n                            <AlertTriangle className=\"h-3 w-3 text-white\" />\n                          </div>\n                          <div className=\"flex flex-col\">\n                            <p className=\"text-sm font-medium text-red-500\">{t(\"Order Cancelled\")}</p>\n                            <p className=\"text-xs text-white/50\">{t(\"This order has been cancelled.\")}</p>\n                          </div>\n                        </div>\n                      )\n                    }\n\n                    return steps.map((step, index) => {\n                      const isCompleted = index < currentStepIndex\n                      const isCurrent = index === currentStepIndex\n                      const isFuture = index > currentStepIndex\n\n                      // Find relevant history item if completed or current\n                      // This is a heuristic matching\n                      const historyItem = selectedOrder.statusHistory?.find(h => {\n                        if (step.id === \"pending\") return h.status === \"pending\"\n                        if (step.id === \"in_progress\") return h.status === \"in_progress\" || h.status === \"waiting_parts\"\n                        if (step.id === \"completed\") return h.status === \"completed\"\n                        if (step.id === \"delivered\") return h.status === \"delivered\"\n                        return false\n                      })\n\n                      return (\n                        <div key={step.id} className={cn(\"relative flex gap-4 pb-8 last:pb-0\", isFuture && \"opacity-40\")}>\n                          <div className={cn(\n                            \"relative z-10 flex h-6 w-6 items-center justify-center rounded-full ring-4 ring-zinc-950 transition-colors\",\n                            isCompleted ? \"bg-cyan-500 text-black\" :\n                              isCurrent ? \"bg-cyan-500 ring-cyan-500/20 animate-pulse text-black\" :\n                                \"bg-zinc-800 text-white/30\"\n                          )}>\n                            {isCompleted ? <CheckCircle className=\"h-3 w-3\" /> :\n                              isCurrent ? <Clock className=\"h-3 w-3\" /> :\n                                <div className=\"h-2 w-2 rounded-full bg-current\" />}\n                          </div>\n                          <div className=\"flex flex-col -mt-1\">\n                            <p className={cn(\"text-sm font-medium\", isCurrent ? \"text-cyan-400\" : \"text-white\")}>\n                              {step.label}\n                            </p>\n                            <p className=\"text-xs text-white/50\">{step.description}</p>\n                            {(isCompleted || isCurrent) && historyItem?.timestamp && (\n                              <p className=\"text-[10px] text-white/30 mt-1\">\n                                {new Date(historyItem.timestamp.seconds * 1000).toLocaleString()}\n                              </p>\n                            )}\n                          </div>\n                        </div>\n                      )\n                    })\n                  })()}\n                </div>\n\n                {/* Detailed History Log (Collapsible or Separate) */}\n                {selectedOrder.statusHistory && selectedOrder.statusHistory.length > 0 && (\n                  <div className=\"mt-6 pt-4 border-t border-white/5\">\n                    <h5 className=\"text-xs font-medium text-white/40 mb-3 uppercase tracking-wider\">{t(\"Detailed History\")}</h5>\n                    <div className=\"space-y-3 pl-2 border-l border-white/5\">\n                      {selectedOrder.statusHistory.slice().reverse().map((h, i) => (\n                        <div key={i} className=\"pl-4 relative\">\n                          <div className=\"absolute left-[-5px] top-1.5 h-2 w-2 rounded-full bg-white/10\" />\n                          <p className=\"text-xs text-white/70\">{h.note || h.status}</p>\n                          <p className=\"text-[10px] text-white/30\">\n                            {h.timestamp?.seconds ? new Date(h.timestamp.seconds * 1000).toLocaleString() : t(\"Just now\")}\n                          </p>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n                <div className=\"mt-6 pt-6 border-t border-white/10\">\n                  <h4 className=\"text-sm font-medium text-white/50 mb-4\">{t(\"Invoice\")}</h4>\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div className=\"space-y-2\">\n                      <div className=\"flex gap-2\">\n                        <Button onClick={openInvoicePreview} className=\"bg-cyan-500 text-black\" disabled={invoiceFinalized || (selectedOrder as any).invoice?.status === \"finalized\"}>{t(\"Generate Final Invoice\")}</Button>\n                        <Button variant=\"outline\" onClick={() => setInvoiceDialogOpen(true)}>{t(\"Preview Invoice\")}</Button>\n                      </div>\n                      <div className=\"flex gap-2\">\n                        <Button variant=\"outline\" onClick={() => window.print()}>{t(\"Print Invoice\")}</Button>\n                        <Button variant=\"outline\" onClick={() => window.print()}>{t(\"Download as PDF\")}</Button>\n                      </div>\n                      <div className=\"flex gap-2\">\n                        <Button variant=\"outline\" onClick={() => {\n                          const price = (selectedOrder as any)?.invoice?.total || (selectedOrder as any)?.totalCost || selectedOrder.price || 0\n                          const msgEn = `Your repair is completed. Final amount: AED ${price}. Please find your invoice attached. Thank you for choosing KBI.`\n                          const msgAr = `ÿ™ŸÖ ÿßŸÑÿßŸÜÿ™Ÿáÿßÿ° ŸÖŸÜ ÿµŸäÿßŸÜÿ© ÿ¨Ÿáÿßÿ≤ŸÉ. ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿßŸÑŸÜŸáÿßÿ¶Ÿä: ${price} ÿØÿ±ŸáŸÖ. ÿ™ÿ¨ÿØ ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© ŸÖÿ±ŸÅŸÇÿ©. ÿ¥ŸÉÿ±Ÿãÿß ŸÑÿßÿÆÿ™Ÿäÿßÿ±ŸÉ KBI.`\n                          const text = `${msgEn}\\n\\n${msgAr}`\n                          if (selectedOrder.customerPhone) {\n                            openWhatsApp(selectedOrder.customerPhone, text)\n                            toast({ title: t(\"WhatsApp opened\"), description: t(\"Invoice sent to customer\") })\n                          } else {\n                            toast({ title: t(\"No phone number available\"), description: t(\"Add customer phone to order\") })\n                          }\n                        }}>{t(\"Resend to Customer\")}</Button>\n                      </div>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <div className=\"grid grid-cols-2 gap-2\">\n                        <Input placeholder={t(\"Discount\")} value={invoiceDiscount} onChange={(e) => setInvoiceDiscount(e.target.value)} className=\"bg-white/5 border-white/10 text-white\" disabled={invoiceFinalized || (selectedOrder as any).invoice?.status === \"finalized\"} />\n                        <Input placeholder={t(\"Warranty Period\")} value={warrantyPeriod} onChange={(e) => setWarrantyPeriod(e.target.value)} className=\"bg-white/5 border-white/10 text-white\" disabled={invoiceFinalized || (selectedOrder as any).invoice?.status === \"finalized\"} />\n                        <div className=\"flex items-center gap-2\">\n                          <input type=\"checkbox\" checked={vatEnabled} onChange={(e) => setVatEnabled(e.target.checked)} disabled={invoiceFinalized || (selectedOrder as any).invoice?.status === \"finalized\"} />\n                          <span className=\"text-sm text-white\">{t(\"VAT Enabled\")}</span>\n                        </div>\n                        <Input placeholder={t(\"VAT Rate\")} value={vatRate} onChange={(e) => setVatRate(e.target.value)} className=\"bg-white/5 border-white/10 text-white\" disabled={invoiceFinalized || (selectedOrder as any).invoice?.status === \"finalized\"} />\n                      </div>\n                      <Input placeholder={t(\"Disclaimer\")} value={disclaimerText} onChange={(e) => setDisclaimerText(e.target.value)} className=\"bg-white/5 border-white/10 text-white\" disabled={invoiceFinalized || (selectedOrder as any).invoice?.status === \"finalized\"} />\n                      <Input placeholder={t(\"Admin Notes\")} value={adminNotesInvoice} onChange={(e) => setAdminNotesInvoice(e.target.value)} className=\"bg-white/5 border-white/10 text-white\" disabled={invoiceFinalized || (selectedOrder as any).invoice?.status === \"finalized\"} />\n                      <div className=\"grid grid-cols-3 gap-2\">\n                        <Button variant={invoiceLang === \"en\" ? \"default\" : \"outline\"} onClick={() => setInvoiceLang(\"en\")} disabled={invoiceFinalized || (selectedOrder as any).invoice?.status === \"finalized\"}>{t(\"English\")}</Button>\n                        <Button variant={invoiceLang === \"ar\" ? \"default\" : \"outline\"} onClick={() => setInvoiceLang(\"ar\")} disabled={invoiceFinalized || (selectedOrder as any).invoice?.status === \"finalized\"}>{t(\"Arabic\")}</Button>\n                        <Button variant={invoiceLang === \"both\" ? \"default\" : \"outline\"} onClick={() => setInvoiceLang(\"both\")} disabled={invoiceFinalized || (selectedOrder as any).invoice?.status === \"finalized\"}>{t(\"EN + AR\")}</Button>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"mt-4 flex items-center gap-2\">\n                    <Badge variant=\"outline\" className=\"text-white/70\">{t(\"Invoice Status\")}: {((selectedOrder as any).invoice?.status || (invoiceFinalized ? \"finalized\" : \"draft\"))}</Badge>\n                    <Button onClick={finalizeInvoice} className=\"bg-green-600 text-white\" disabled={invoiceFinalized || (selectedOrder as any).invoice?.status === \"finalized\"}>{t(\"Finalize Invoice\")}</Button>\n                    <Input placeholder={t(\"Override reason\")} value={overrideReason} onChange={(e) => setOverrideReason(e.target.value)} className=\"bg-white/5 border-white/10 text-white max-w-xs\" />\n                    <Button variant=\"outline\" onClick={overrideInvoice}>{t(\"Override Edit\")}</Button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n      <Dialog open={invoiceDialogOpen} onOpenChange={setInvoiceDialogOpen}>\n        <DialogContent className=\"bg-white text-black sm:max-w-[800px]\">\n          <DialogHeader>\n            <DialogTitle>{t(\"Invoice Preview\")}</DialogTitle>\n          </DialogHeader>\n          {selectedOrder && (\n            <div className=\"max-h-[70vh] overflow-auto\">\n              <FinalInvoice\n                order={selectedOrder}\n                items={getInvoiceItemsForOrder(selectedOrder)}\n                invoiceNumber={invoiceNumber}\n                invoiceDate={new Date().toISOString()}\n                language={invoiceLang}\n                discount={Number(invoiceDiscount || 0)}\n                vatEnabled={vatEnabled}\n                vatRate={Number(vatRate || 0)}\n                warrantyPeriod={warrantyPeriod}\n                adminNotes={adminNotesInvoice}\n                disclaimerText={disclaimerText}\n              />\n            </div>\n          )}\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => window.print()}>{t(\"Print Invoice\")}</Button>\n            <Button onClick={finalizeInvoice}>{t(\"Finalize Invoice\")}</Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n      <Dialog open={counterDialogOpen} onOpenChange={setCounterDialogOpen}>\n        <DialogContent className=\"bg-zinc-900 border-zinc-800 text-white sm:max-w-[500px]\">\n          <DialogHeader>\n            <DialogTitle>{t(\"Counter Offer\")}: {selectedOrder?.orderId}</DialogTitle>\n          </DialogHeader>\n          <div className=\"grid gap-3\">\n            <Input type=\"number\" placeholder={t(\"Counter Price (AED)\")} value={counterPrice} onChange={(e) => setCounterPrice(e.target.value)} className=\"bg-white/5 border-white/10 text-white\" />\n            <Input type=\"number\" placeholder={t(\"Counter Duration (minutes)\")} value={counterDuration} onChange={(e) => setCounterDuration(e.target.value)} className=\"bg-white/5 border-white/10 text-white\" />\n            <Input type=\"text\" placeholder={t(\"Arrival ETA\")} value={counterETA} onChange={(e) => setCounterETA(e.target.value)} className=\"bg-white/5 border-white/10 text-white\" />\n            <Input type=\"text\" placeholder={t(\"Note\")} value={counterNote} onChange={(e) => setCounterNote(e.target.value)} className=\"bg-white/5 border-white/10 text-white\" />\n          </div>\n          <DialogFooter>\n            <Button onClick={() => selectedOrder && handleCounterOffer(selectedOrder)}>{t(\"Save Counter\")}</Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}